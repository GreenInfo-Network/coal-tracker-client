{"version":3,"sources":["webpack:///app.3ba8e44468f6c8c3dac4.js","webpack:///webpack/bootstrap 3ba8e44468f6c8c3dac4","webpack:///(webpack)/buildin/global.js","webpack:///./index.js","webpack:///./node_modules/es6-promise-polyfill/promise.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/process/browser.js","webpack:///./index.scss"],"names":["e","__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","g","this","Function","eval","window","resize","height","$","CONFIG","map","invalidateSize","tablediv","length","value","width","hasHorizontalScrollBar","css","table","columns","adjust","draw","initData","url","Promise","resolve","reject","data","drawMap","arguments","fitbounds","statuses","trackers","forEach","tracker","status","indexOf","push","clusters","RemoveMarkers","feature","statusId","status_types","id","cssClass","marker","PruneCluster","Marker","parseFloat","lat","lng","title","unit","icon","L","divIcon","className","iconSize","attributes","coordinates","category","parseInt","RegisterMarker","status_markers","markers","ProcessView","cluster_bounds","Cluster","ComputeGlobalBounds","bounds","minLat","minLng","maxLat","maxLng","homebounds","setTimeout","fitBounds","center","getCenter","zoom","getBoundsZoom","setView","once","getBounds","show","target","html","label","type","attr","appendTo","container","class","style","color","text","drawTable","row","each","table_names","splice","clear","rows","add","search","default_title","updateResultsPanel","country","totalrow","empty","totaltext","toLocaleString","resetTheMap","val","render","force_redraw","selected_country","layer","clearLayers","DATA","filtered","click","massageCountryFeaturesAsTheyLoad","rawdata","properties","NAME","navigator","msMaxTouchPoints","isMobile","userAgent","match","on","getZoom","hovered","countries","setStyle","country_no_style","country_hover_style","clickCountry","addTo","highlightCountryLayer","searchCountry","_bounds","addData","removeCurrentBasemap","keys","basemaps","basemap","removeLayer","labels","searchForText","query","array","fields","filter","some","k","toLowerCase","includes","tracker_data","search_categories","suggestions","companies","sort","company","mark","options","results","hide","delay","latLngBounds","r","require","hybrid","gridLayer","googleMutant","pane","satellite","tileLayer","attribution","default_basemap","outerring","minzoom","maxzoom","maskstyle","stroke","fillColor","fillOpacity","country_selected_style","opacity","chinese_name","plant","sponsor","parent","capacity","region","subnational","year","announced","styles","status1","pre-permit","status2","permitted","status3","construction","status4","shelved","status5","retired","status6","cancelled","status7","operating","status8","mothballed","status9","markercluster_colors","v","all","location","search_placeholder","document","ready","then","a","country_data","split","closest","submit","siblings","trigger","event","is","dataset","latlng","latLng","addLayer","prop","oldbounds","back","backButton","Control","extend","position","onAdd","DomUtil","create","_map","button","control","href","innerHTML","DomEvent","addListener","stopPropagation","preventDefault","goBack","remove","currentTarget","innerText","placeholder","keyup","_","debounce","attributionControl","zoomControl","minZoom","maxZoom","writable","createPane","getPane","zIndex","pointerEvents","addAttribution","mask","featureGroup","polygon","geoJson","onEachFeature","cluster_layer","names","index","inArray","colnames","obj","DataTable","columnDefs","targets","visible","searchable","autoWidth","scrollY","scrollX","lengthMenu","iDisplayLength","dom","deferRender","change","selected","baselayer","FilterMarkers","data_to_filter","PruneClusterForLeaflet","BuildLeafletClusterIcon","cluster","Icon","MarkerCluster","stats","population","pi2","Math","PI","Point","createIcon","createElement","_setIconStyles","x","y","getContext","createShadow","canvas","start","size","beginPath","moveTo","fillStyle","gap","from","to","arc","lineTo","fill","closePath","textAlign","textBaseline","font","fillText","BuildLeafletCluster","_this","markersArea","FindMarkersInArea","ComputeBounds","fire","getLatLng","PrepareLeafletMarker","leafletMarker","bindPopup","setIcon","popup","dataname","wiki","modal","openPopup","closePopup","hasClass","addClass","find","toggleClass","removeClass","params","URLSearchParams","place","eachLayer","String","trim","replace","capitalize","charAt","toUpperCase","slice","fn","scrollWidth","clientWidth","toString","propertyIsEnumerable","_typeof","TypeError","toTitleCase","substr","RegExp","global","setImmediate","__WEBPACK_AMD_DEFINE_RESULT__","isArray","asyncFlush","asyncQueue","asyncTimer","asyncCall","callback","arg","asyncSetTimer","invokeCallback","subscriber","owner","settled","state_","data_","promise","FULFILLED","handleThenable","REJECTED","resolved","fulfill","reason","PENDING","SEALED","publishFulfillment","publishRejection","publish","callbacks","then_","resolver","rejectPromise","NativePromise","nativePromiseSupported","Polyfill","NOOP","constructor","onFulfillment","onRejection","fulfilled","rejected","catch","promises","remaining","race","self","Timeout","clearFn","_id","_clearFn","scope","apply","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","process","undefined","handle","tasksByHandle","runIfPresent","currentlyRunningATask","task","args","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","doc","attachTo","getPrototypeOf","nextTick","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","random","source","addEventListener","attachEvent","MessageChannel","port1","port2","documentElement","script","onreadystatechange","removeChild","appendChild","Array","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","len","run","cachedClearTimeout","Item","noop","browser","env","argv","version","versions","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","circlesize","circlesize_mobile","circleopacity"],"mappings":"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","file":"app.3ba8e44468f6c8c3dac4.js","sourcesContent":["!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(2)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(7),r=n.n(a),o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};var i,s,c,l,u=n(3).Promise,d={},p={};function f(){var e=$(window).height()-54;$(\"div#map\").height(e-8),d.map.invalidateSize(),$(\"div.content\").height(e);var t=$(\".dataTables_scrollBody\");if(t.length){var n=$(window).width()<768?273:265;t.hasHorizontalScrollBar()&&(n+=10);e=$(\"body\").height()-n;t.css(\"height\",e),d.table.columns.adjust().draw()}}function m(e){return new u(function(t,n){$.get(e,function(e){t(e)})})}function h(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=[],a=[];e.forEach(function(e){var t=e.status;t&&(n.indexOf(t)<0&&n.push(t),a.push(e))}),function(e,t){d.clusters.RemoveMarkers(),e.forEach(function(e){var t=e.status,n=d.status_types[t].id,a=\"status\"+(n+1),r=new PruneCluster.Marker(parseFloat(e.lat),parseFloat(e.lng),{title:e.unit,icon:L.divIcon({className:\"circle-div \"+a,iconSize:[15,15]})});r.data.attributes=e,r.data.coordinates=[e.lat,e.lng],r.category=parseInt(n),d.clusters.RegisterMarker(r),d.status_markers[t].markers.push(r)}),d.clusters.ProcessView();var n=d.clusters.Cluster.ComputeGlobalBounds();if(n)var a=[[n.minLat,n.minLng],[n.maxLat,n.maxLng]];else a=d.homebounds;t&&setTimeout(function(){if(d.map.fitBounds(a),!d.homebounds){var e=d.map.getCenter(),t=d.map.getBoundsZoom(a,!0);d.map.setView([e.lat,e.lng],t),d.map.once(\"moveend zoomend\",function(){d.homebounds=d.map.getBounds()})}},200)}(a,t),function(e){$(\"#status-layer-wrapper\").show();var t=$(\"#status-layers\").html(\"\");e.forEach(function(e){var n=$(\"<label>\"),a=$(\"<input>\",{type:\"checkbox\",value:e}).attr(\"checked\",\"checked\");a.appendTo(n);var r=$(\"<span>\",{class:\"legend-container\"}).appendTo(n);$(\"<div>\",{style:\"background:\"+d.status_types[e].color,class:\"circle\"}).appendTo(r),$(\"<span>\",{text:\" \"+d.status_types[e].text}).appendTo(r);n.appendTo(t)})}(n)}function y(e,t){var n=[];e.forEach(function(e){var t=[];$.each(d.table_names,function(n,a){\"unit\"!=a&&t.push(e[a])}),t.splice(1,0,'<a href=\"'+e.url+'\" target=\"_blank\" title=\"click to open the Wiki page for this project\">'+e.unit+\"</a>\"),n.push(t)}),d.table.clear(),d.table.rows.add(n),d.table.search(\"\").draw();var a=t||d.default_title;$(\"div#table h3 span\").text(a)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default_title;$(\"div#country-results div#results-title h3\").text(t);var n=$(\"div#country-results div#total-count\").empty(),a=e.length>0?e.length>1?\"Tracking \"+e.length.toLocaleString()+\" coal-fired units\":\"Tracking \"+e.length+\" coal project\":\"Nothing found\";$(\"<div>\",{text:a}).appendTo(n)}function g(){$(\"form.search-form input\").val(\"\"),d.homebounds?(P({force_redraw:!0,fitbounds:!1}),d.map.fitBounds(d.homebounds)):P({force_redraw:!0}),d.selected_country.layer.clearLayers(),d.selected_country.name=\"\",p.filtered=null,$(\"input#map-tab\").click(),f()}function b(e,t){t.name=e.properties.NAME,(\"ontouchstart\"in window||window.navigator.msMaxTouchPoints>0)&&(I()||navigator.userAgent.match(/iPad/i)&&null!=navigator.userAgent.match(/iPad/i))||t.on(\"mouseover\",function(e){if(!(d.map.getZoom()>7)){var t=this.feature.properties.NAME;d.selected_country.name!=t&&(t!=d.hovered&&d.countries.setStyle(d.country_no_style),d.hovered=t,this.setStyle(d.country_hover_style))}}).on(\"mouseout\",function(e){var t=this.feature.properties.NAME;d.selected_country.name!=t&&this.setStyle(d.country_no_style)}),t.on(\"click\",k),t.addTo(d.countries)}function k(e){if(!(d.map.getZoom()>7)){$(\"form#search input\").val(\"\");var t=e.target.feature.properties.NAME;d.selected_country.name=t,w(e.target.feature),C(t,e.target._bounds)}}function w(e){d.selected_country.layer.clearLayers(),d.selected_country.layer.addData(e)}function T(){Object.keys(d.basemaps).forEach(function(e){d.map.removeLayer(d.basemaps[e]),d.map.removeLayer(d.basemaps.labels)})}function x(){var e=$(\"form#search input#mapsearch\").val(),t=$(\"select#search-category\").val();p.filtered=function(e,t,n){return e.filter(function(e){return n.some(function(n){return e[n].toLowerCase().includes(t.toLowerCase())})})}(p.tracker_data,e,d.search_categories[t]);var n=$(\"div#suggestions\").empty();\"parent\"==t&&(n.show(),function(e,t){return e.filter(function(e){return e.toLowerCase().includes(t.toLowerCase())})}(p.companies,e).sort().forEach(function(t){$(\"<div>\",{class:\"suggestion\",text:t}).appendTo(n).mark(e)}));return h(p.filtered),v(p.filtered,e),y(p.filtered,e),$(\"form#nav-table-search input\").val(e),d.selected_country.layer.clearLayers(),d.selected_country.name=\"\",$(\"div#country-results\").show(),$(\"a.clear-search\").show(),!1}function P(e){void 0===e&&(e={}),e.name=void 0!==e.name?e.name:d.default_title,e.map=void 0===e.map||e.map,e.results=void 0===e.results||e.results,e.table=void 0===e.table||e.table,e.force_redraw=void 0!==e.force_redraw&&e.force_redraw,e.fitbounds=void 0===e.fitbounds||e.fitbounds,$(\"div.searchwrapper a.clear-search\").hide(),e.map&&h(p.tracker_data,e.force_redraw,e.fitbounds),e.results&&v(p.tracker_data),e.table&&y(p.tracker_data,e.name)}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=[];switch(p.tracker_data.forEach(function(t){e==t.country&&a.push(t)}),P({name:e,map:!0,results:!1,table:!1,fitbounds:!1}),v(a,e),y(p.tracker_data),e){case\"Russia\":t=L.latLngBounds([38.354,24],[78.11962,178]);break;case\"United States\":t=L.latLngBounds([18.3,-172.6],[71.7,-67.4]);break;case\"Canada\":t=L.latLngBounds([41.6,-141],[81.7,-52.6])}setTimeout(function(){d.map.fitBounds(t)},n)}function I(){return $(window).width()<768}d.basemaps={hybrid:L.gridLayer.googleMutant({type:\"hybrid\",pane:\"hybrid\"}),satellite:L.gridLayer.googleMutant({type:\"satellite\",pane:\"satellite\"}),basemap:L.tileLayer(\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}.png\",{attribution:\"©OpenStreetMap, ©CARTO\",pane:\"basemap\"}),labels:L.tileLayer(\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png\",{pane:\"labels\"})},d.default_basemap=\"basemap\",d.default_title=\"Worldwide\",d.outerring=[[-90,-360],[-90,360],[90,360],[90,-360],[-90,-360]],d.minzoom=2,d.maxzoom=17,d.maskstyle={stroke:!1,fillColor:\"#999\",fillOpacity:.2,className:\"mask\"},d.country_hover_style={stroke:!1,fillColor:\"#fffef4\",fillOpacity:.9},d.country_selected_style={stroke:!1,fillColor:\"#fff\",fillOpacity:1},d.country_no_style={opacity:0,fillOpacity:0},d.attributes={id:{name:\"Tracker ID\"},unit:{name:\"Unit\"},chinese_name:{name:\"Chinese name\"},plant:{name:\"Plant\"},url:{name:\"Wiki page\"},sponsor:{name:\"Sponsor\"},parent:{name:\"Parent\"},capacity:{name:\"Capacity (MW)\"},status:{name:\"Status\"},region:{name:\"Region\"},country:{name:\"Country\"},subnational:{name:\"Subnational unit (province/state)\"},year:{name:\"Start year\"}},d.status_types={announced:{id:0,text:\"Announced\",color:r.a.status1},\"pre-permit\":{id:1,text:\"Pre-permit\",color:r.a.status2},permitted:{id:2,text:\"Permitted\",color:r.a.status3},construction:{id:3,text:\"Construction\",color:r.a.status4},shelved:{id:4,text:\"Shelved\",color:r.a.status5},retired:{id:5,text:\"Retired\",color:r.a.status6},cancelled:{id:6,text:\"Cancelled\",color:r.a.status7},operating:{id:7,text:\"Operating\",color:r.a.status8},mothballed:{id:8,text:\"Mothballed\",color:r.a.status9}},d.status_markers={announced:{markers:[]},\"pre-permit\":{markers:[]},permitted:{markers:[]},construction:{markers:[]},shelved:{markers:[]},retired:{markers:[]},cancelled:{markers:[]},operating:{markers:[]},mothballed:{markers:[]}},d.markercluster_colors=Object.keys(d.status_types).map(function(e){return d.status_types[e].color}),d.search_categories={all:[\"unit\",\"plant\",\"parent\",\"region\",\"country\",\"subnational\",\"year\"],unit:[\"unit\",\"plant\"],parent:[\"parent\"],location:[\"region\",\"country\",\"subnational\"],year:[\"year\"]},d.search_placeholder={all:\"project name, company, country\",unit:\"unit name, plant name\",parent:\"company name\",location:\"place name\",year:\"year (e.g. 2010)\"},$(document).ready(function(){u.all([m(\"./data/trackers.json\"),m(\"./data/countries.json\"),m(\"./data/companies.txt\")]).then(function(e){var t,n,a;!function(e){p.tracker_data=e[0],p.country_data=e[1],p.companies=e[2].split(\"\\n\")}(e),$(\"div a#reset-button\").on(\"click\",function(){g()}),$(\"form.search-form span.glyphicon-search\").on(\"click\",function(){I()||$(this).closest(\"form\").submit()}),$(\"div.close\").on(\"click\",function(){$(this).parent().hide()}),$(\"div#results-icon\").on(\"click\",function(){$(\"div#country-results\").show()}),$(\"div.searchwrapper a.clear-search\").on(\"click\",function(){$(this).siblings(\"input\").val(\"\").trigger(\"keyup\"),$(\"div#suggestions\").hide(),$(this).hide(),p.filtered=null}),$(document).click(function(e){var t=$(e.target);!t.closest(\"div#suggestions\").length&&$(\"div#suggestions\").is(\":visible\")&&$(\"div#suggestions\").hide()}),$(\"#btn-zoom\").click(function(){var e=this.dataset.zoom.split(\",\"),t=L.latLng([e[0],e[1]]);T(),d.map.addLayer(d.basemaps.satellite),$('#layers-base input[data-baselayer=\"satellite\"]').prop(\"checked\",!0),d.countries.setStyle(d.country_no_style),d.selected_country.name=\"\",d.selected_country.layer.clearLayers(),d.oldbounds=d.map.getBounds(),0==$(\".btn-back\").length&&d.back.addTo(d.map),d.map.setView(t,16)}),L.backButton=L.Control.extend({options:{position:\"bottomleft\"},onAdd:function(e){var t=L.DomUtil.create(\"div\",\"btn btn-primary btn-back\",t);t.title=\"Click to go back to the previous view\",this._map=e;var n=L.DomUtil.create(\"a\",\"active\",t);return n.control=this,n.href=\"javascript:void(0);\",n.innerHTML='<span class=\"glyphicon glyphicon-chevron-left\"></span> Go back to country view',L.DomEvent.addListener(n,\"click\",L.DomEvent.stopPropagation).addListener(n,\"click\",L.DomEvent.preventDefault).addListener(n,\"click\",function(){this.control.goBack()}),t},goBack:function(){d.map.fitBounds(d.oldbounds),T(),d.map.addLayer(d.basemaps.basemap),d.map.addLayer(d.basemaps.labels),$('#layers-base input[data-baselayer=\"basemap\"]').prop(\"checked\",!0),d.back.remove(d.map)}}),$(\"div#layer-control-clear span#select-all\").on(\"click\",function(e){return $(\"div#status-layers input:not(:checked)\").each(function(e){$(this).click()}),!1}),$(\"div#layer-control-clear span#clear-all\").on(\"click\",function(e){return $(\"div#status-layers input:checked\").each(function(e){$(this).click()}),!1}),$(\"input.tab\").on(\"click\",function(e){var t=e.currentTarget.id.split(\"-\")[0];switch(t){case\"map\":d.map.invalidateSize(!1),$(\"form.search-form\").show();break;case\"table\":$(\"form.search-form\").show(),f();break;default:$(\"form.search-form\").hide()}}),$(\"div#suggestions\").on(\"click\",\"div.suggestion\",function(){var e=this.innerText;$(\"form#search input\").val(e),x(),$(\"div#suggestions\").hide()}),$(\"select#search-category\").on(\"change\",function(){var e=$(this).val(),t=d.search_placeholder[e];$(\"input#mapsearch\").attr(\"placeholder\",t),$(\"div#suggestions\").empty().hide()}),$(\"form#search input\").keyup(_.debounce(function(){if(!this.value)return g();$(this).submit()},300)),$(\"form#search\").submit(function(e){e.preventDefault(),$(\"form#search input#mapsearch\").val()&&x()}),d.map=L.map(\"map\",(t={attributionControl:!1,zoomControl:!1,minZoom:d.minzoom,maxZoom:d.maxzoom},a=!1,(n=\"attributionControl\")in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t)),L.control.zoom({position:\"topright\"}).addTo(d.map),d.map.createPane(\"basemap\"),d.map.getPane(\"basemap\").style.zIndex=300,d.map.getPane(\"basemap\").style.pointerEvents=\"none\",d.map.createPane(\"hybrid\"),d.map.getPane(\"hybrid\").style.zIndex=301,d.map.getPane(\"hybrid\").style.pointerEvents=\"none\",d.map.createPane(\"satellite\"),d.map.getPane(\"satellite\").style.zIndex=302,d.map.getPane(\"satellite\").style.pointerEvents=\"none\",d.map.createPane(\"labels\"),d.map.getPane(\"labels\").style.zIndex=475,d.map.getPane(\"labels\").style.pointerEvents=\"none\",d.map.createPane(\"country-mask\"),d.map.getPane(\"country-mask\").style.zIndex=320,d.map.createPane(\"country-hover\"),d.map.getPane(\"country-hover\").style.zIndex=350,d.map.createPane(\"country-select\"),d.map.getPane(\"country-select\").style.zIndex=450,d.map.createPane(\"feature-pane\"),d.map.getPane(\"feature-pane\").style.zIndex=550,L.control.attribution().addTo(d.map).addAttribution('Interactive mapping by <a href=\"http://greeninfo.org\" target=\"_blank\">GreenInfo Network</a>. Data: <a href=\"https://globalenergymonitor.org/\" target=\"_blank\">Global Energy Monitor</a>'),d.mask=L.featureGroup([L.polygon(d.outerring)],{pane:\"country-mask\"}).addTo(d.map),d.mask.setStyle(d.maskstyle),d.countries=L.featureGroup([],{pane:\"country-hover\"}).addTo(d.map),L.geoJson(p.country_data,{style:d.country_no_style,onEachFeature:b}),d.selected_country={},d.selected_country.layer=L.geoJson([],{style:d.country_selected_style,pane:\"country-select\"}).addTo(d.map),d.cluster_layer=L.featureGroup([],{pane:\"feature-pane\"}).addTo(d.map),d.map.on(\"load\",function(){f(),d.map.invalidateSize()}),d.back=new L.backButton,d.map.on(\"zoomend\",function(){d.map.getZoom()}),function(){var e=$.map(d.attributes,function(e){return e}),t=Object.keys(d.attributes),n=$.inArray(\"url\",t);e.splice(n,1),t.splice(n,1),d.table_names=t;var a=[];$.each(e,function(e,t){var n={};n.title=t.name,a.push(n)}),d.table=$(\"#table-content table\").DataTable({data:[],columnDefs:[{targets:[0],visible:!1,searchable:!1}],columns:a,autoWidth:!0,scrollY:\"1px\",scrollX:!0,lengthMenu:[50,100,500],iDisplayLength:100,dom:\"litp\",deferRender:!0})}(),d.map.addLayer(d.basemaps.basemap),d.map.addLayer(d.basemaps.labels),$(\"#layers-base input\").change(function(){var e=$(this).data().baselayer;T(),d.map.addLayer(d.basemaps[e]),\"basemap\"==e&&d.map.addLayer(d.basemaps.labels),\"satellite\"==e?$('div.layer-control[data-panel=\"layers\"]').css(\"bottom\",\"42px\"):$('div.layer-control[data-panel=\"layers\"]').css(\"bottom\",\"22px\")}),$(\"div.layer-control\").on(\"change\",\"#status-layers input\",function(){var e=$(this).val(),t=d.status_markers[e].markers;d.clusters.FilterMarkers(t,!$(this).prop(\"checked\")),d.clusters.ProcessView();var n=[];$(\"div.layer-control div#status-layers input:checked\").each(function(e){n.push(this.value)});var a=p.filtered||p.tracker_data,r=a.filter(function(e){return n.indexOf(e.status)>-1});y(r,\"Status filtered\"),v(r,\"Status filtered\")}),function(){d.clusters=new PruneClusterForLeaflet(30),d.map.addLayer(d.clusters),d.clusters.BuildLeafletClusterIcon=function(e){var t=new L.Icon.MarkerCluster;return t.stats=e.stats,t.population=e.population,t};var e=2*Math.PI;L.Icon.MarkerCluster=L.Icon.extend({options:{iconSize:new L.Point(22,22),className:\"prunecluster leaflet-markercluster-icon\"},createIcon:function(){var e=document.createElement(\"canvas\");this._setIconStyles(e,\"icon\");var t=this.options.iconSize;return e.width=t.x,e.height=t.y,this.draw(e.getContext(\"2d\"),t.x,t.y),e},createShadow:function(){return null},draw:function(t,n,a){for(var r=0,o=0,i=d.markercluster_colors.length;o<i;++o){var s=this.stats[o]/this.population;if(s>0){t.beginPath(),t.moveTo(11,11),t.fillStyle=d.markercluster_colors[o];var c=1==s?0:.15,l=r+c,u=r+s*e;u<l&&(l=r),t.arc(11,11,11,l,u),r+=s*e,t.lineTo(11,11),t.fill(),t.closePath()}}t.beginPath(),t.fillStyle=\"white\",t.arc(11,11,7,0,2*Math.PI),t.fill(),t.closePath(),t.fillStyle=\"#555\",t.textAlign=\"center\",t.textBaseline=\"middle\",t.font=\"bold 9px sans-serif\",t.fillText(this.population,11,11,15)}}),d.clusters.BuildLeafletCluster=function(e,t){var n=this,a=new L.Marker(t,{icon:this.BuildLeafletClusterIcon(e)});return a.on(\"click\",function(){var t=n.Cluster.FindMarkersInArea(e.bounds),r=n.Cluster.ComputeBounds(t);r&&n._map.fire(\"overlappingmarkers\",{cluster:n,markers:t,center:a.getLatLng(),marker:a})}),a},d.clusters.PrepareLeafletMarker=function(e,t){var n=\"<div style='text-align:center;'><strong>\"+t.title+\"</strong><br><div class='popup-click-msg'>Click the circle for details</div></div>\";e.bindPopup(n),e.setIcon(t.icon),e.attributes=t.attributes,e.coordinates=t.coordinates,e.on(\"click\",function(){!function(e){var t=e.attributes,n=$(\"#tracker-modal\");$.each(t,function(e,t){\"status\"==e&&(t=d.status_types[t].text),$(\"#tracker-modal .modal-content span\").filter('[data-name=\"'+e+'\"]').text(t)});var a=$(\"#tracker-modal .modal-content a\").filter('[data-name=\"wiki_page\"]');t.url?(a.attr(\"href\",t.url),a.parent().show()):a.parent().hide();$(\"#btn-zoom\").attr(\"data-zoom\",e.attributes.lat+\",\"+e.attributes.lng),n.modal()}(this)}),e.on(\"mouseover\",function(){this.openPopup()}),e.on(\"mouseout\",function(){d.map.closePopup()})},d.clusters.FilterMarkers=function(e,t){for(var n=0,a=e.length;n<a;++n)e[n].filtered=t}}(),function(){var e=$(\"select#search-category\").val(),t=d.search_placeholder[e],n=$(\"input#mapsearch\");if($(window).width()<768){if(n.hasClass(\"collapsed\"))return;n.addClass(\"collapsed\"),setTimeout(function(){n.attr(\"placeholder\",\"\")},300),n.siblings().find(\"span.glyphicon-search\").on(\"click\",function(){n.toggleClass(\"collapsed\"),n.hasClass(\"collapsed\")?setTimeout(function(){n.attr(\"placeholder\",\"\"),n.val(\"\")},300):n.attr(\"placeholder\",t)})}else n.removeClass(\"collapsed\"),n.attr(\"placeholder\",t)}(),function(){if((e=window.location.href).indexOf(\"?\")>-1){var e=new URLSearchParams(window.location.search),t=e.get(\"country\");t?d.countries.eachLayer(function(e){if(e.name==t){var n=e.getBounds();C(t,n,2e3),y(p.tracker_data),w(e.feature)}}):g()}else g()}(),setTimeout(function(){$(window).trigger(\"resize\"),$(\"div#pleasewait\").hide()},300)})}),$(window).resize(function(){f()}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\\s+|\\s+$/g,\"\")}),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},$.fn.hasHorizontalScrollBar=function(){return this.get(0).scrollWidth>this.get(0).clientWidth},Object.keys||(Object.keys=(i=Object.prototype.hasOwnProperty,s=!{toString:null}.propertyIsEnumerable(\"toString\"),l=(c=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"]).length,function(e){if(\"object\"!=(void 0===e?\"undefined\":o(e))&&(\"function\"!=typeof e||null===e))throw new TypeError(\"Object.keys called on non-object\");var t,n,a=[];for(t in e)i.call(e,t)&&a.push(t);if(s)for(n=0;l>n;n++)i.call(e,c[n])&&a.push(c[n]);return a})),String.prototype.toTitleCase=function(){var e,t,n,a,r;for(n=this.replace(/([^\\W_]+[^\\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),e=0,t=(a=[\"A\",\"An\",\"The\",\"And\",\"But\",\"Or\",\"For\",\"Nor\",\"As\",\"At\",\"By\",\"For\",\"From\",\"In\",\"Into\",\"Near\",\"Of\",\"On\",\"Onto\",\"To\",\"With\"]).length;t>e;e++)n=n.replace(new RegExp(\"\\\\s\"+a[e]+\"\\\\s\",\"g\"),function(e){return e.toLowerCase()});for(e=0,t=(r=[\"Id\",\"Tv\"]).length;t>e;e++)n=n.replace(new RegExp(\"\\\\b\"+r[e]+\"\\\\b\",\"g\"),r[e].toUpperCase());return n};String.prototype.includes||(String.prototype.includes=function(e,t){return\"number\"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)})},function(e,t,n){(function(a,r){var o;!function(a){var i=a.Promise,s=i&&\"resolve\"in i&&\"reject\"in i&&\"all\"in i&&\"race\"in i&&function(){var e;return new i(function(t){e=t}),\"function\"==typeof e}();void 0!==t&&t?(t.Promise=s?i:P,t.Polyfill=P):void 0===(o=function(){return s?i:P}.call(t,n,t,e))||(e.exports=o);var c=\"pending\",l=\"sealed\",u=\"fulfilled\",d=\"rejected\",p=function(){};function f(e){return\"[object Array]\"===Object.prototype.toString.call(e)}var m,h=void 0!==r?r:setTimeout,y=[];function v(){for(var e=0;e<y.length;e++)y[e][0](y[e][1]);y=[],m=!1}function g(e,t){y.push([e,t]),m||(m=!0,h(v,0))}function b(e){var t=e.owner,n=t.state_,a=t.data_,r=e[n],o=e.then;if(\"function\"==typeof r){n=u;try{a=r(a)}catch(e){$(o,e)}}k(o,a)||(n===u&&w(o,a),n===d&&$(o,a))}function k(e,t){var n;try{if(e===t)throw new TypeError(\"A promises callback cannot return that same promise.\");if(t&&(\"function\"==typeof t||\"object\"==typeof t)){var a=t.then;if(\"function\"==typeof a)return a.call(t,function(a){n||(n=!0,t!==a?w(e,a):_(e,a))},function(t){n||(n=!0,$(e,t))}),!0}}catch(t){return n||$(e,t),!0}return!1}function w(e,t){e!==t&&k(e,t)||_(e,t)}function _(e,t){e.state_===c&&(e.state_=l,e.data_=t,g(T,e))}function $(e,t){e.state_===c&&(e.state_=l,e.data_=t,g(x,e))}function L(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)b(t[n])}function T(e){e.state_=u,L(e)}function x(e){e.state_=d,L(e)}function P(e){if(\"function\"!=typeof e)throw new TypeError(\"Promise constructor takes a function argument\");if(this instanceof P==!1)throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");this.then_=[],function(e,t){function n(e){$(t,e)}try{e(function(e){w(t,e)},n)}catch(e){n(e)}}(e,this)}P.prototype={constructor:P,state_:c,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(p),fulfilled:e,rejected:t};return this.state_===u||this.state_===d?g(b,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},P.all=function(e){if(!f(e))throw new TypeError(\"You must pass an array to Promise.all().\");return new this(function(t,n){var a=[],r=0;function o(e){return r++,function(n){a[e]=n,--r||t(a)}}for(var i,s=0;s<e.length;s++)(i=e[s])&&\"function\"==typeof i.then?i.then(o(s),n):a[s]=i;r||t(a)})},P.race=function(e){if(!f(e))throw new TypeError(\"You must pass an array to Promise.race().\");return new this(function(t,n){for(var a,r=0;r<e.length;r++)(a=e[r])&&\"function\"==typeof a.then?a.then(t,n):t(a)})},P.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})},P.reject=function(e){return new this(function(t,n){n(e)})}}(\"undefined\"!=typeof window?window:void 0!==a?a:\"undefined\"!=typeof self?self:this)}).call(t,n(0),n(4).setImmediate)},function(e,t,n){(function(e){var a=void 0!==e&&e||\"undefined\"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(5),t.setImmediate=\"undefined\"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate=\"undefined\"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(0))},function(e,t,n){(function(e,t){!function(e,n){\"use strict\";if(!e.setImmediate){var a,r,o,i,s,c=1,l={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,\"[object process]\"==={}.toString.call(e.process)?a=function(e){t.nextTick(function(){m(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage(\"\",\"*\"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},a=function(e){o.port2.postMessage(e)}):d&&\"onreadystatechange\"in d.createElement(\"script\")?(r=d.documentElement,a=function(e){var t=d.createElement(\"script\");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):a=function(e){setTimeout(m,0,e)}:(i=\"setImmediate$\"+Math.random()+\"$\",s=function(t){t.source===e&&\"string\"==typeof t.data&&0===t.data.indexOf(i)&&m(+t.data.slice(i.length))},e.addEventListener?e.addEventListener(\"message\",s,!1):e.attachEvent(\"onmessage\",s),a=function(t){e.postMessage(i+t,\"*\")}),p.setImmediate=function(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[c]=r,a(c),c++},p.clearImmediate=f}function f(e){delete l[e]}function m(e){if(u)setTimeout(m,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}(t)}finally{f(e),u=!1}}}}}(\"undefined\"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(6))},function(e,t){var n,a,r=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function i(){throw new Error(\"clearTimeout has not been defined\")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{a=\"function\"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var e=s(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||u||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title=\"browser\",r.browser=!0,r.env={},r.argv=[],r.version=\"\",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error(\"process.binding is not supported\")},r.cwd=function(){return\"/\"},r.chdir=function(e){throw new Error(\"process.chdir is not supported\")},r.umask=function(){return 0}},function(e,t){e.exports={status1:\"#f3ff00\",status2:\"orange\",status3:\"#F26C4F\",status4:\"red\",status5:\"#5974a2\",status6:\"#58a1a1\",status7:\"#4CDB4C\",status8:\"#845440\",status9:\"#d6a490\",circlesize:\"12\",circlesize_mobile:\"14\",circleopacity:\".85\"}}]);\n\n\n// WEBPACK FOOTER //\n// app.3ba8e44468f6c8c3dac4.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3ba8e44468f6c8c3dac4","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 0\n// module chunks = 0","///////////////////////////////////////////////////////////////////////////////////////////////////////////\n// IMPORTS\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\nconst Promise = require('es6-promise-polyfill').Promise;\n\n///////////////////////////////////////////////////////////////////////////////////\n// STYLES, in production, these will be written to <script> tags\n///////////////////////////////////////////////////////////////////////////////////\n// import './loading.css';\nimport styles from './index.scss';\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n// GLOBAL VARIABLES & STRUCTURES\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n// global config\nconst CONFIG = {};\nconst DATA = {};\n\n// basemap definitions, no options here, just a single set of basemap tiles and labels above features. see initMap();\nCONFIG.basemaps = {\n  'hybrid': L.gridLayer.googleMutant({ type: 'hybrid', pane: 'hybrid' }),\n  'satellite': L.gridLayer.googleMutant({ type: 'satellite', pane: 'satellite' }),\n  'basemap' : L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}.png', { attribution: '©OpenStreetMap, ©CARTO', pane: 'basemap' }),\n  'labels': L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png', { pane: 'labels' }),\n};\n\n// specify which basemap will be on by default, and when the map is reset by the 'Reset' button\nCONFIG.default_basemap = 'basemap';\n\n// default title for results\nCONFIG.default_title = 'Worldwide';\n\n// outerring, used for constructing the mask, see searchCountry();\nCONFIG.outerring = [[-90,-360],[-90,360],[90,360],[90,-360],[-90,-360]];\n\n// minzoom and maxzoom for the map\nCONFIG.minzoom = 2;\nCONFIG.maxzoom = 17;\n\n// Style definitions (see also scss exports, which are imported here as styles{})\n// a light grey mask covering the entire globe\nCONFIG.maskstyle = { stroke: false, fillColor: '#999', fillOpacity: 0.2, className: 'mask' };\n// style for highlighting countries on hover and click\nCONFIG.country_hover_style    = { stroke: false, fillColor: '#fffef4', fillOpacity: 0.9 };\nCONFIG.country_selected_style = { stroke: false, fillColor: '#fff', fillOpacity: 1 };\n// an \"invisible\" country style, as we don't want countries to show except on hover or click\nCONFIG.country_no_style = { opacity: 0, fillOpacity: 0 };\n\n// primary attributes to display: used for searching, displaying individual results on map popups, etc.\nCONFIG.attributes = {\n  'id': {name: 'Tracker ID'},\n  'unit': {name: 'Unit'},\n  'chinese_name': {name: 'Chinese name'},\n  'plant': {name: 'Plant'},\n  'url': {name: 'Wiki page'},\n  'sponsor': {name: 'Sponsor'},\n  'parent': {name: 'Parent'},\n  'capacity': {name: 'Capacity (MW)'},\n  'status': {name: 'Status'},\n  'region': {name: 'Region'},\n  'country': {name: 'Country'},\n  'subnational': {name: 'Subnational unit (province/state)'},\n  'year': {name: 'Start year'},\n};\n\n\n// the Universe of status types: these are the categories used to symbolize coal plants on the map\n//          key: allowed status names, matching those used in DATA.fossil_data\n//          text: human readible display\n//          color: imported from CSS\nCONFIG.status_types = {\n  'announced': {'id': 0, 'text': 'Announced', 'color': styles.status1 },\n  'pre-permit': {'id': 1, 'text': 'Pre-permit', 'color': styles.status2 },\n  'permitted': {'id': 2, 'text': 'Permitted', 'color': styles.status3 },\n  'construction': {'id': 3, 'text': 'Construction', 'color': styles.status4 },\n  'shelved': {'id': 4, 'text': 'Shelved', 'color': styles.status5 },\n  'retired': {'id': 5, 'text': 'Retired', 'color': styles.status6 },\n  'cancelled': {'id': 6, 'text': 'Cancelled', 'color': styles.status7 },\n  'operating': {'id': 7, 'text': 'Operating', 'color': styles.status8 },\n  'mothballed': {'id': 8, 'text': 'Mothballed', 'color': styles.status9 },\n};\n\n// used to keep a list of markers showing for a particular country or place, by status\n// allows us to 'filter' markers, e.g. show/hide using FilterMarkers method added to leaflet.prunecluster.js\n// ** IMPORTANT: ensure that these keys match the keys in CONFIG.status_types exactly\n// NOTE: Keep in order by status type id (above), otherwise the clusters \"pie charts\" will not get the correct color\nCONFIG.status_markers = {\n  'announced': {'markers': []},\n  'pre-permit': {'markers': []},\n  'permitted': {'markers': []},\n  'construction': {'markers': []},\n  'shelved': {'markers': []},\n  'retired': {'markers': []},\n  'cancelled': {'markers': []},\n  'operating': {'markers': []},\n  'mothballed': {'markers': []},\n};\n\n// Note: prunecluster.markercluster.js needs this, and I have not found a better way to provide it\nCONFIG.markercluster_colors = Object.keys(CONFIG.status_types).map(function(v) { return CONFIG.status_types[v].color });\n\n// search fields for various categories. These are selected by values keyed select#search-category\nCONFIG.search_categories = {\n  'all': ['unit', 'plant', 'parent', 'region', 'country', 'subnational', 'year'],\n  'unit': ['unit', 'plant'],\n  'parent': ['parent'],\n  'location': ['region', 'country', 'subnational'],\n  'year': ['year'],\n}\n\n// the placeholder to show, also depends on the select#search-category selection\nCONFIG.search_placeholder = {\n  'all': 'project name, company, country',\n  'unit': 'unit name, plant name',\n  'parent': 'company name',\n  'location': 'place name',\n  'year': 'year (e.g. 2010)',\n}\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n///// INITIALIZATION: these functions are called when the page is ready,\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n$(document).ready(function () {\n  // data initialization first, then the remaining init steps\n  Promise.all([initData('./data/trackers.json'), \n               initData('./data/countries.json'), \n               initData('./data/companies.txt'),\n              ])\n    .then(function(data) {\n      initDataFormat(data)    // get data ready for use\n      initButtons();          // init button listeners\n      initTabs();             // init the main navigation tabs. \n      initSearch();           // init the full text search\n      initMap();              // regular leaflet map setup\n      initTable();            // init the DataTable table\n      initMapLayers();        // init some map layers and map feature styles\n      initStatusCheckboxes(); // initialize the checkboxes to turn on/off trackers by status\n      initPruneCluster();     // init the prune clustering library\n      initSearchBar();        // init viewport-specific search bar behavior\n\n      initState();            // init app state given url options\n\n      // ready!\n      setTimeout(function () {\n        $(window).trigger('resize');\n        $('div#pleasewait').hide();\n      }, 300);\n    }); // Promise.then()\n});\n\n// listen for changes to the window size and resize the map\n$(window).resize(function() {\n  // resize the map, table and content divs to fit the current window\n  resize();\n})\n\n// resize everything: map, content divs, table\nfunction resize() {\n  // calculate the content height for this window:\n  // 42px for the nav bar, 10px top #map, 10px top of #container = 42 + 20 + 10\n  var winheight = $(window).height();\n  var height = winheight - 54;\n\n  // resize the map\n  $('div#map').height(height - 8);\n  CONFIG.map.invalidateSize();\n\n  // resize the content divs to this same height\n  $('div.content').height(height);\n\n  // resize the table body\n  // guesstimate a good scrollbody height; dynamic based on the window height\n  var tablediv = $('.dataTables_scrollBody');\n  if (!tablediv.length) return;\n  // starting value\n  var value = $(window).width() < 768 ? 273 : 265;\n  // differential sizing depending on if there is a horizontal scrollbar or not\n  if (tablediv.hasHorizontalScrollBar()) value += 10;\n  var height = $('body').height() - value;\n  // set the scrollbody height via css property\n  tablediv.css('height', height);\n  CONFIG.table.columns.adjust().draw();\n}\n\n// init some viewport-specific search bar behavior\nfunction initSearchBar() {\n  var category = $('select#search-category').val();\n  var placeholder = CONFIG.search_placeholder[category];\n  var search = $('input#mapsearch');\n  var width = $(window).width();\n  if (width < 768) {\n    if (search.hasClass('collapsed')) return;\n    search.addClass('collapsed');\n    setTimeout(function() { search.attr('placeholder','') }, 300);\n    search.siblings().find('span.glyphicon-search').on('click', function() {\n      search.toggleClass('collapsed');\n      if (search.hasClass('collapsed')) {\n        setTimeout(function() {\n          search.attr('placeholder','');\n          search.val('');\n        }, 300);\n      } else {\n        search.attr('placeholder',placeholder);\n        // search.off('click');\n      }\n    });\n  } else {\n    search.removeClass('collapsed');\n    search.attr('placeholder',placeholder);\n  }\n}\n\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n// Functions called on doc ready\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n// Basic data init, returns a promise\nfunction initData(url) {\n  // wrap this in a promise, so we know we have it before continuing on to remaining initialize steps\n  return new Promise(function(resolve, reject) {\n    $.get(url, function(data) {\n      resolve(data);\n    });\n  });\n}\n\n// data parsing and formatting, once data are on-board\nfunction initDataFormat(data) {\n  // keep a reference to the tracker data JSON\n  DATA.tracker_data = data[0];\n\n  // set country data equal to the second data object from the initData() Promise()\n  DATA.country_data = data[1];\n\n  // organize company data into an array of companies\n  DATA.companies = data[2].split('\\n');\n}\n\n// init state from allowed params, or not\nfunction initState() {\n  // first check if we are loading from url params or not\n  var params = window.location.href;\n  // if we have url params, get the params and use them to set state\n  if (params.indexOf('?') > -1) {\n    // get the params. The only one supported at the moment is \"country\"\n    var params = new URLSearchParams(window.location.search);\n    var place = params.get('country');\n    if (place) {\n      // find the country, zoom to it\n      CONFIG.countries.eachLayer(function(layer) {\n        if (layer.name == place ) {\n          var bounds = layer.getBounds();\n          searchCountry(place, bounds, 2000);\n          drawTable(DATA.tracker_data);\n          highlightCountryLayer(layer.feature);\n        }\n      })\n    } else {\n      resetTheMap();\n    }\n  } else {\n    // the default init, if we don't have matching params\n    resetTheMap();\n  }\n}\n\nfunction initButtons() {\n  // \"reset\" button that resets the map\n  $('div a#reset-button').on('click', function(){\n    resetTheMap();\n  });\n\n  // search icons on the search forms, click to submit\n  $('form.search-form span.glyphicon-search').on('click', function() {\n    // shouldn't really be needed, since this submits on keyup()\n    // and definitely not on mobile, as it interferes with the form exapanding\n    if ( !isMobile() ) {\n      $(this).closest('form').submit();\n    }\n  });\n\n  // close button, generically closes it's direct parent\n  $('div.close').on('click', function() { $(this).parent().hide(); });\n\n  // init the menu icon to open the \"results\" panel\n  $('div#results-icon').on('click', function() { $('div#country-results').show(); });\n\n  // the clear search button, clears the search input\n  $('div.searchwrapper a.clear-search').on('click', function() {\n    $(this).siblings('input').val('').trigger('keyup');\n    $('div#suggestions').hide();\n    $(this).hide();\n    DATA.filtered = null;\n  });\n\n  // hide, but don't clear suggestions \"menu\" when clicking outside of it\n  $(document).click(function(event) { \n    var $target = $(event.target);\n    if(!$target.closest('div#suggestions').length && \n    $('div#suggestions').is(\":visible\")) {\n      $('div#suggestions').hide();\n    }        \n  });\n\n  // init the zoom button that shows on the modal details for an individual coal plant\n  $('#btn-zoom').click(function(){\n    var target = this.dataset.zoom.split(',');\n    var latlng = L.latLng([target[0], target[1]]);\n    var zoom = 16;\n\n    // remove current basemap\n    removeCurrentBasemap();\n    // add google satellite basemap\n    CONFIG.map.addLayer(CONFIG.basemaps['satellite']);\n    // ...and keep the radio button in sync with the map\n    $('#layers-base input[data-baselayer=\"satellite\"]').prop('checked', true);\n\n    // remove any country \"highlight\" and select effect, as this will block the map\n    CONFIG.countries.setStyle(CONFIG.country_no_style);\n    CONFIG.selected_country.name = '';\n    CONFIG.selected_country.layer.clearLayers();\n\n    // add the back button, which takes the user back to previous view (see function goBack() defined in the construction of Leaflet control)\n    // but only if there is not already a back button on the map\n    CONFIG.oldbounds = CONFIG.map.getBounds();\n    if ($('.btn-back').length == 0) CONFIG.back.addTo(CONFIG.map);\n\n    // move and zoom the map to the selected unit\n    CONFIG.map.setView(latlng, zoom);\n  });\n\n  // a leaflet control to take the user back to where they came\n  // Only visible when zooming to an individual plant from the dialog popup. See $('#btn-zoom').click()\n  L.backButton = L.Control.extend({\n    options: {\n      position: 'bottomleft'\n    },\n\n    onAdd: function (map) {\n      var container   = L.DomUtil.create('div', 'btn btn-primary btn-back', container);\n      container.title = 'Click to go back to the previous view';\n      this._map       = map;\n\n      // generate the button\n      var button = L.DomUtil.create('a', 'active', container);\n      button.control   = this;\n      button.href      = 'javascript:void(0);';\n      button.innerHTML = '<span class=\"glyphicon glyphicon-chevron-left\"></span> Go back to country view';\n\n      L.DomEvent\n        .addListener(button, 'click', L.DomEvent.stopPropagation)\n        .addListener(button, 'click', L.DomEvent.preventDefault)\n        .addListener(button, 'click', function () {\n          this.control.goBack();\n        });\n\n      // all set, L.Control API is to return the container we created\n      return container;\n    },\n\n    // the function called by the control\n    goBack: function () {\n      // set the map to the previous bounds\n      CONFIG.map.fitBounds(CONFIG.oldbounds);\n\n      // remove current basemap\n      removeCurrentBasemap();\n      // add the plain basemap - we could try to keep track of which basemap the user\n      // was on before zooming in - but what if they zoom in to another? then the current\n      // basemap becomes satellite - and tracking all this gets ridiculous\n      CONFIG.map.addLayer(CONFIG.basemaps.basemap);\n      CONFIG.map.addLayer(CONFIG.basemaps.labels);\n\n      // keep the radio button in sync with the map\n      $('#layers-base input[data-baselayer=\"basemap\"]').prop('checked', true);\n\n      // remove the back button\n      CONFIG.back.remove(CONFIG.map);\n    }\n  });\n\n  // select all/none by status\n  $('div#layer-control-clear span#select-all').on('click', function(e) {\n    $('div#status-layers input:not(:checked)').each(function(c) { $(this).click() });\n    return false;\n  });\n  $('div#layer-control-clear span#clear-all').on('click', function(e) {\n    $('div#status-layers input:checked').each(function(c) { $(this).click() });\n    return false;\n  });\n}\n\n// initialize the map in the main navigation map tab\nfunction initMap() {\n  // basic leaflet map setup\n  CONFIG.map = L.map('map', {\n    attributionControl:false,\n    zoomControl: false,\n    minZoom: CONFIG.minzoom, maxZoom: CONFIG.maxzoom,\n    attributionControl: false,\n  });\n\n  // add zoom control, top right\n  L.control.zoom({\n    position:'topright'\n  }).addTo(CONFIG.map);\n\n  // map panes\n  // - create panes for basemaps\n  CONFIG.map.createPane('basemap');\n  CONFIG.map.getPane('basemap').style.zIndex = 300;\n  CONFIG.map.getPane('basemap').style.pointerEvents = 'none';\n  CONFIG.map.createPane('hybrid');\n  CONFIG.map.getPane('hybrid').style.zIndex = 301;\n  CONFIG.map.getPane('hybrid').style.pointerEvents = 'none';\n  CONFIG.map.createPane('satellite');\n  CONFIG.map.getPane('satellite').style.zIndex = 302;\n  CONFIG.map.getPane('satellite').style.pointerEvents = 'none';\n  CONFIG.map.createPane('labels');\n  CONFIG.map.getPane('labels').style.zIndex = 475;\n  CONFIG.map.getPane('labels').style.pointerEvents = 'none';\n  // - create map panes for county interactions, which will sit between the basemap and labels\n  CONFIG.map.createPane('country-mask');\n  CONFIG.map.getPane('country-mask').style.zIndex = 320;\n  CONFIG.map.createPane('country-hover');\n  CONFIG.map.getPane('country-hover').style.zIndex = 350;\n  CONFIG.map.createPane('country-select');\n  CONFIG.map.getPane('country-select').style.zIndex = 450;\n  CONFIG.map.createPane('feature-pane');\n  CONFIG.map.getPane('feature-pane').style.zIndex = 550;\n\n  // add attribution\n  var credits = L.control.attribution().addTo(CONFIG.map);\n  credits.addAttribution('Interactive mapping by <a href=\"http://greeninfo.org\" target=\"_blank\">GreenInfo Network</a>. Data: <a href=\"https://globalenergymonitor.org/\" target=\"_blank\">Global Energy Monitor</a>');\n\n  // Add a feature group to hold the mask, essentially a grey box covering the world minus the country in the view\n  CONFIG.mask = L.featureGroup([L.polygon(CONFIG.outerring)], {pane: 'country-mask' }).addTo(CONFIG.map);\n  CONFIG.mask.setStyle(CONFIG.maskstyle);\n\n  // Add a layer to hold countries, for click and hover (not mobile) events on country features\n  CONFIG.countries = L.featureGroup([], { pane: 'country-hover' }).addTo(CONFIG.map);\n  L.geoJson(DATA.country_data,{ style: CONFIG.country_no_style, onEachFeature: massageCountryFeaturesAsTheyLoad });\n\n  // add a layer to hold any selected country\n  CONFIG.selected_country = {};\n  CONFIG.selected_country.layer = L.geoJson([], {style: CONFIG.country_selected_style, pane: 'country-select'}).addTo(CONFIG.map);\n\n  // add a feature group to hold the clusters\n  CONFIG.cluster_layer = L.featureGroup([], {pane: 'feature-pane' }).addTo(CONFIG.map);\n\n  // once the map is done loading, resize\n  CONFIG.map.on('load', function() {\n    resize();\n    CONFIG.map.invalidateSize();\n  });\n\n  // create an instance of L.backButton()\n  CONFIG.back = new L.backButton() // not added now, see initButtons()\n\n  // zoom listeners\n  CONFIG.map.on('zoomend', function() {\n    let zoom = CONFIG.map.getZoom();\n  });\n\n}\n\nfunction initMapLayers() {\n  // on startup, add the basemap and labels\n  CONFIG.map.addLayer(CONFIG.basemaps.basemap);\n  CONFIG.map.addLayer(CONFIG.basemaps.labels);\n\n  // set listener on radio button change to change to the selected basemap\n  // and also control whether or not the mask is showing\n  $('#layers-base input').change(function() {\n    var selected = $(this).data().baselayer;\n    // remove current basemap and labels\n    removeCurrentBasemap();\n    // add selected basemap and labels, if necessary\n    CONFIG.map.addLayer(CONFIG.basemaps[selected]);\n    if (selected == 'basemap') CONFIG.map.addLayer(CONFIG.basemaps.labels);\n\n    // make room for the attribution\n    if (selected == 'satellite') {\n      $('div.layer-control[data-panel=\"layers\"]').css('bottom', '42px');\n    } else {\n      $('div.layer-control[data-panel=\"layers\"]').css('bottom', '22px');\n    }\n\n  });\n}\n\n// set listener on checkboxes to turn on/off trackers by status, and update the clusters\nfunction initStatusCheckboxes() {\n  $('div.layer-control').on('change', '#status-layers input', function() {\n    var status = $(this).val();\n    // 1) update the markers on the map\n    var markers = CONFIG.status_markers[status].markers;\n    CONFIG.clusters.FilterMarkers(markers, !$(this).prop('checked')); // false to filter on, true to filter off :)\n    CONFIG.clusters.ProcessView();\n\n    // 2) update the rows shown on the table\n    let statuses = [];\n    $('div.layer-control div#status-layers input:checked').each(function(l) { \n      statuses.push(this.value);\n    });\n    // filter the current set of filtered data, or all data if there is no current filter applied\n    let data_to_filter = DATA.filtered || DATA.tracker_data;\n    var filtered = data_to_filter.filter(function(d) {\n      return statuses.indexOf(d.status) > -1\n    })\n    drawTable(filtered, 'Status filtered');\n\n    // 3) update the \"results\" panel\n    updateResultsPanel(filtered, 'Status filtered');\n  });\n}\n\n// init the data table, but don't populate it, yet\nfunction initTable() {\n  // set up the table column names we want to use in the table\n  var columns = $.map(CONFIG.attributes, function(value){ return value; });\n  \n  // set up formatted column names for the table\n  var names = Object.keys(CONFIG.attributes);\n  // don't include column for url; we're going to format this as a link together with the unit name\n  var index = $.inArray('url',names);\n  columns.splice(index, 1);\n  names.splice(index, 1);\n  CONFIG.table_names = names;\n\n  // put table column names into format we need for DataTables\n  var colnames = [];\n  $.each(columns, function(k, value) {\n    // set up an empty object and push a sTitle keys to it for each column title\n    var obj = {};\n    obj['title'] = value.name;\n    colnames.push(obj);\n  });\n  // initialize and keep a reference to the DataTable\n  CONFIG.table = $('#table-content table').DataTable({\n    data           : [],\n    // include the id in the data, but not searchable, nor displayed\n    columnDefs     : [{targets:[0], visible: false, searchable: false}],\n    columns        : colnames,\n    autoWidth      : true,\n    scrollY        : \"1px\", // initial value only, will be resized by calling resize();\n    scrollX        : true,\n    lengthMenu     : [50, 100, 500],\n    iDisplayLength : 100, // 100 has a noticable lag to it when displaying and filtering; 10 is fastest\n    dom            : 'litp',\n    deferRender    : true, // default is false\n  });\n} // init table\n\n// initialize the nav tabs: what gets shown, what gets hidden, what needs resizing, when these are displayed\n// important: to add a functional tab, you must also include markup for it in css, see e.g. input#help-tab:checked ~ div#help-content {}\nfunction initTabs()    {\n  $('input.tab').on('click', function(e) {\n    // get the type from the id\n    var type = e.currentTarget.id.split(\"-\")[0];\n    switch (type) {\n      case 'map':\n        CONFIG.map.invalidateSize(false);\n        $('form.search-form').show();\n        break;\n      case 'table':\n        $('form.search-form').show();\n        resize();\n        break;\n      default:\n        // hide search form\n        $('form.search-form').hide();\n        break;\n    }\n  });\n}\n\n// A collection of things to init that support searching\nfunction initSearch() {\n  // when clicking on a \"suggestion\", put that text in the search input and search\n  $('div#suggestions').on('click', 'div.suggestion', function() {\n    var query = this.innerText;\n    $('form#search input').val(query);\n    searchForText();\n    $('div#suggestions').hide();\n  });\n\n  // update the placeholder text when search category is selected\n  $('select#search-category').on('change', function() {\n    let value = $(this).val();\n    let placeholder = CONFIG.search_placeholder[value];\n    // clear any search string on the search and update the placeholder\n    $('input#mapsearch').attr('placeholder', placeholder);\n    // empty and hide the \"suggestions\" div\n    $('div#suggestions').empty().hide();\n  });\n\n  // init the \"map search\" form input itself\n  $('form#search input').keyup(_.debounce(function() {\n    // if the input is cleared, show all results\n    // this is distinct from the case of \"No results\", in searchForText\n    if (!this.value) return resetTheMap();\n    // otherwise, just trigger the search\n    $(this).submit();\n  },300));\n\n  $('form#search').submit(function(e) {\n    // prevent default, and return early if we submitted an empty form\n    e.preventDefault();\n    if (! $('form#search input#mapsearch').val()) return;\n\n    // search the map, and that process will update the table\n    searchForText();\n  })\n\n}\n\n// initialize the PruneClusters, and override some factory methods\nfunction initPruneCluster() {\n  // create a new PruceCluster object, with a minimal cluster size of (30)\n  // updated arg to 30; seems to really help countries like China/India\n  CONFIG.clusters = new PruneClusterForLeaflet(30);\n  CONFIG.map.addLayer(CONFIG.clusters);\n\n  // this is from the categories example; sets ups cluster stats used to derive category colors in the clusters\n  CONFIG.clusters.BuildLeafletClusterIcon = function(cluster) {\n    var e = new L.Icon.MarkerCluster();\n    e.stats = cluster.stats;\n    e.population = cluster.population;\n    return e;\n  };\n\n  var pi2 = Math.PI * 2;\n\n  L.Icon.MarkerCluster = L.Icon.extend({\n    options: {\n      iconSize: new L.Point(22, 22),\n      className: 'prunecluster leaflet-markercluster-icon'\n    },\n\n    createIcon: function () {\n      // based on L.Icon.Canvas from shramov/leaflet-plugins (BSD licence)\n      var e = document.createElement('canvas');\n      this._setIconStyles(e, 'icon');\n      var s = this.options.iconSize;\n      e.width = s.x;\n      e.height = s.y;\n      this.draw(e.getContext('2d'), s.x, s.y);\n      return e;\n    },\n\n    createShadow: function () {\n      return null;\n    },\n\n    draw: function(canvas, width, height) {\n      // the pie chart itself\n      var start = 0;\n      for (var i = 0, l = CONFIG.markercluster_colors.length; i < l; ++i) {\n        // the size of this slice of the pie\n        var size = this.stats[i] / this.population;\n        if (size > 0) {\n          canvas.beginPath();\n          canvas.moveTo(11, 11);\n          canvas.fillStyle = CONFIG.markercluster_colors[i];\n          // start from a smidgen away, to create a tiny gap, unless this is a single slice pie\n          // in which case we don't want a gap\n          var gap = size == 1 ? 0 : 0.15\n          var from = start + gap;\n          var to = start + size * pi2;\n\n          if (to < from) {\n            from = start;\n          }\n          canvas.arc(11,11,11, from, to);\n          start = start + size*pi2;\n          canvas.lineTo(11,11);\n          canvas.fill();\n          canvas.closePath();\n        }\n      }\n\n      // the white circle on top of the pie chart, to make the middle of the \"donut\"\n      canvas.beginPath();\n      canvas.fillStyle = 'white';\n      canvas.arc(11, 11, 7, 0, Math.PI*2);\n      canvas.fill();\n      canvas.closePath();\n\n      // the text label count\n      canvas.fillStyle = '#555';\n      canvas.textAlign = 'center';\n      canvas.textBaseline = 'middle';\n      canvas.font = 'bold 9px sans-serif';\n\n      canvas.fillText(this.population, 11, 11, 15);\n    }\n  });\n\n  // we override this method: don't force zoom to a cluster on click (the default)\n  CONFIG.clusters.BuildLeafletCluster = function (cluster, position) {\n    var _this = this;\n    var m = new L.Marker(position, {\n      icon: this.BuildLeafletClusterIcon(cluster)\n    });\n    // this defines what happen when you click a cluster, not the underlying icons\n    m.on('click', function () {\n      var markersArea = _this.Cluster.FindMarkersInArea(cluster.bounds);\n      var b = _this.Cluster.ComputeBounds(markersArea);\n      if (b) {\n        // skip the force zoom that is here by default, instead, spiderfy the overlapping icons\n        _this._map.fire('overlappingmarkers', { cluster: _this, markers: markersArea, center: m.getLatLng(), marker: m });\n      }\n    });\n    return m;\n  }\n\n  // we override this method to handle clicks on individual plant markers (not the clusters)\n  CONFIG.clusters.PrepareLeafletMarker = function(leafletMarker, data){\n    var html = `<div style='text-align:center;'><strong>${data.title}</strong><br><div class='popup-click-msg'>Click the circle for details</div></div>`;\n    leafletMarker.bindPopup(html);\n    leafletMarker.setIcon(data.icon);\n    leafletMarker.attributes = data.attributes;\n    leafletMarker.coordinates = data.coordinates;\n    leafletMarker.on('click',function () {\n      openTrackerInfoPanel(this);\n    });\n    leafletMarker.on('mouseover', function() {\n      this.openPopup();\n    });\n    leafletMarker.on('mouseout', function() { CONFIG.map.closePopup(); });\n  }\n\n  // A convenience method for marking a given feature as \"filtered\" (e.g. not shown on the map and removed from a cluster)\n  CONFIG.clusters.FilterMarkers = function (markers, filter) {\n    for (var i = 0, l = markers.length; i < l; ++i) {\n      // false to add, true to remove\n      markers[i].filtered = filter;\n    }\n  };\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n// Named functions\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n// Set up all map layers for all types and statuses, and set up layer objects in CONFIG.status_types['layers'], so we can turn them on and off later.\nfunction drawMap(data, force_redraw=false, fitbounds=true) {\n  // step 1: clear the marker clustering system and repopulate it with the current set of tracker points\n  // as we go through, log what statuses are in fact seen; this is used in step 5 to show/hide checkboxes for toggling trackers by status\n  var statuses   = [];\n  var trackers   = [];\n  data.forEach(function (tracker) {\n    var status = tracker.status;\n    if (status) {\n      // log that this status has been seen, see step 3 below\n      if (statuses.indexOf(status) < 0) statuses.push(status);\n      // add the feature to the trackers list for the table\n      trackers.push(tracker);\n    }\n  });\n  // step 2: update the marker clustering, now that \"trackers\" is implicitly filtered to everything that we need\n  updateClusters(trackers, fitbounds);\n\n  // step 3: hide the status toggle checkboxes, showing only the ones which in fact have a status represented\n  drawLegend(statuses);\n}\n\nfunction updateClusters(data, fitbounds) {\n  // start by clearing out existing clusters\n  CONFIG.clusters.RemoveMarkers();\n\n  // iterate over the data and set up the clusters\n  data.forEach(function(feature) {\n    // the \"status\" of the tracker point affects its icon color\n    // and also its membership in CONFIG.status_markers for per-status filtering\n    var status = feature.status;\n    var statusId = CONFIG.status_types[status]['id'];\n    var cssClass = `status${statusId + 1}`;\n    var marker = new PruneCluster.Marker(parseFloat(feature.lat), parseFloat(feature.lng), {\n      title: feature.unit,\n      icon: L.divIcon({\n          className: 'circle-div ' + cssClass, // Specify a class name we can refer to in CSS.\n          iconSize: [15, 15] // Set the marker width and height\n        })\n    });\n\n    // get the attributes for use in the custom popup dialog (see openTrackerInfoPanel())\n    marker.data.attributes = feature;\n\n    // get the lat-lng now so we can zoom to the plant's location later\n    // getting the lat-lng of the spider won't work, since it gets spidered out to some other place\n    // tip: the raw dataset is lng,lat and Leaflet is lat,lng\n    marker.data.coordinates = [ feature.lat, feature.lng ];\n\n    // set the category for PruneCluster-ing\n    marker.category = parseInt(statusId);\n\n    // These have all defaulted to visible for a long time now... do we need this??\n    // furthermore, if the marker shouldn't be visible at first, filter the marker by setting the filtered flag to true (=don't draw me)\n    // if (!CONFIG.status_types[status].visible) marker.filtered = true;\n\n    // register the marker for PruneCluster clustering\n    CONFIG.clusters.RegisterMarker(marker);\n\n    // also add the marker to the list by status, so we can toggle it on/off in the legend\n    // see CONFIG.map.on('overlayadd') and CONFIG.map.on('overlayremove')\n    CONFIG.status_markers[status].markers.push(marker);\n  });\n  // all set! process the view, and fit the map to the new bounds\n  CONFIG.clusters.ProcessView();\n  var cluster_bounds = CONFIG.clusters.Cluster.ComputeGlobalBounds();\n  if (cluster_bounds) {\n    var bounds = [[cluster_bounds.minLat, cluster_bounds.minLng],[cluster_bounds.maxLat, cluster_bounds.maxLng]];\n  } else {\n    // we have no clusters (empty result)!\n    bounds = CONFIG.homebounds;\n  }\n  // fit the map to the bounds, if instructed\n  if (fitbounds) {\n    // timeout appears necessary to let the clusters do their thing, before fitting bounds\n    setTimeout(function() {\n      // typically we'll just do this (e.g. on search)\n      CONFIG.map.fitBounds(bounds);\n      // first load: a trick to always fit the bounds in the map, see #20\n      if (! CONFIG.homebounds) {\n        let center = CONFIG.map.getCenter();\n        let zoom = CONFIG.map.getBoundsZoom(bounds, true); // finds the zoom where bounds are fully contained\n        CONFIG.map.setView([center.lat, center.lng], zoom);\n        CONFIG.map.once(\"moveend zoomend\", function() {\n          // wait til this animation is complete, then set homebounds\n          CONFIG.homebounds = CONFIG.map.getBounds();\n        });\n      } \n    }, 200)\n  }\n}\n// show and hide the correct legend labels and checkboxes for this set of data and statuses\n// \"statuses\" comes from the data search itself\nfunction drawLegend(statuses) {\n  $('#status-layer-wrapper').show();\n  var target = $('#status-layers').html(''); // clear existing html\n  statuses.forEach(function(status) {\n    var label = $('<label>');\n    var input = $('<input>', {\n      type: 'checkbox',\n      value: status\n    }).attr('checked','checked');\n    input.appendTo(label);\n\n    var container = $('<span>', {'class': 'legend-container'}).appendTo(label);\n    // adds colored circle to legend\n    var div = $('<div>', {\n      style: 'background:' + CONFIG.status_types[status].color,\n      'class': 'circle'\n    }).appendTo(container);\n    // adds text to legend\n    var innerSpan = $('<span>', {\n      text: ' ' + CONFIG.status_types[status].text\n    }).appendTo(container);\n\n    label.appendTo(target);\n  });\n}\n\n// update the DataTable\nfunction drawTable(trackers, title) {\n  // set up the table data\n  var data = [];\n  trackers.forEach(function(tracker) {\n    // make up a row entry for the table: a list of column values.\n    // and copy over all columns from [CONFIG.table_names] as is to this row\n    var row = [];\n    $.each(CONFIG.table_names, function(i,name) {\n      // we've already got 'Unit' formatted as a link, above, so skip this here\n      if (name=='unit') return;\n      row.push(tracker[name]);\n    });\n    // Add project name as url to the wiki page\n    row.splice(1,0,`<a href=\"${tracker.url}\" target=\"_blank\" title=\"click to open the Wiki page for this project\">${tracker.unit}</a>`);\n    // when that's all done, push the row as another [] to data\n    data.push(row);\n  });\n\n  // purge and reinitialize the DataTable instance\n  CONFIG.table.clear();\n  CONFIG.table.rows.add(data);\n  CONFIG.table.search('').draw();\n\n  // update the table name, if provided\n  var text = title ? title : CONFIG.default_title;\n  $('div#table h3 span').text(text);\n}\n\n// update the \"results\" panel that sits above the map\n// this always shows either the Global tally of things, or a country-specific count, or a count from a search term enterd in the \"Free Search\" input\nfunction updateResultsPanel(data, country=CONFIG.default_title) {\n  // update primary content\n  $('div#country-results div#results-title h3').text(country);\n  var totalrow = $('div#country-results div#total-count').empty();\n  var totaltext = data.length > 0 ? (data.length > 1 ? `Tracking ${data.length.toLocaleString()} coal-fired units` : `Tracking ${data.length} coal project`) : `Nothing found`;\n  var total = $('<div>',{text: totaltext}).appendTo(totalrow);\n}\n\n// when user clicks on a coal plant point, customize a popup dialog and open it\nfunction openTrackerInfoPanel(feature) {\n  // get the features properties, i.e. the data to show on the modal\n  var properties = feature.attributes;\n  // get the popup object itself and customize\n  var popup = $('#tracker-modal');\n  // go through each property for this one feature, and write out the value to the correct span, according to data-name property\n  $.each(properties, function(dataname, value) {\n    // get preferred text for each status types\n    if (dataname == 'status') value = CONFIG.status_types[value].text;\n    // write the status name to the dialog\n    $('#tracker-modal .modal-content span').filter('[data-name=\"' + dataname + '\"]').text(value);\n  })\n\n  // wiki page needs special handling to format as <a> link\n  var wiki = $('#tracker-modal .modal-content a').filter('[data-name=\"wiki_page\"]');\n  if (properties['url']) {\n    wiki.attr('href', properties['url']);\n    wiki.parent().show();\n  } else {\n    wiki.parent().hide();\n  }\n\n  // format the zoom-to button data.zoom attribute. See initZoom();\n  // this lets one zoom to the location of the clicked plant\n  var zoomButton = $('#btn-zoom');\n  zoomButton.attr('data-zoom', feature.attributes.lat + \",\" + feature.attributes.lng);\n\n  // all set: open the dialog\n  popup.modal();\n}\n\n// Reset \"button\": resets the app to default state\nfunction resetTheMap() {\n  // clear anything in the search inputs\n  $('form.search-form input').val('');\n\n  // reset map & table display with the default search\n  // If we have a homebounds defined, that means we've been here before, and have rendered the full data to the map.\n  if (CONFIG.homebounds) {\n    // use homebounds we already defined\n    render({ force_redraw: true, fitbounds: false });\n    CONFIG.map.fitBounds(CONFIG.homebounds);\n  } else {\n    // first time through, let this function do the map fitting and set CONFIG.homebounds\n    render({ force_redraw: true });\n  }\n\n  // clear any existing country and feature selection\n  CONFIG.selected_country.layer.clearLayers();\n  CONFIG.selected_country.name = '';\n  DATA.filtered = null;\n\n  // switch back to the map tab\n  $('input#map-tab').click();\n\n  // resize everything\n  resize();\n}\n\n// this callback is used when CONFIG.countries is loaded via GeoJSON; see initMap() for details\nfunction massageCountryFeaturesAsTheyLoad(rawdata,feature) {\n  // attach some attributes\n  feature.name = rawdata.properties['NAME'];\n\n  // only register hover events for non-touch, non-mobile devices\n  // including isMobile() || isIpad() here to include iPad and exclude \"other\" touch devices here, e.g. my laptop, which is touch, but not mobile\n  if (! (isTouch() && ( isMobile() || isIpad() ))) {\n    // on mouseover, highlight me; on mouseout quit highlighting\n    feature.on('mouseover', function (e) {\n      // if we are at a high zoom, don't do anything\n      if (CONFIG.map.getZoom() > 7) return;\n      // if this country is already 'selected', don't do anything\n      var name = this.feature.properties['NAME'];\n      if (CONFIG.selected_country.name == name) return;\n      // keep a reference to the hovered featured feature\n      // and unhighlight other countries that may already be highlighted\n      if (name != CONFIG.hovered) CONFIG.countries.setStyle(CONFIG.country_no_style);\n      CONFIG.hovered = name;\n      // then highlight this country\n      this.setStyle(CONFIG.country_hover_style);\n    }).on('mouseout', function (e) {\n      // on mouseout, remove the highlight, unless\n      // this country is already \"selected\" (clicked, see below)\n      var name = this.feature.properties['NAME'];\n      if (CONFIG.selected_country.name == name) return;\n      this.setStyle(CONFIG.country_no_style);\n    });\n  }\n  // at lower zooms, register a click event: on click, search and zoom to the selected country\n  feature.on('click', clickCountry);\n\n  // finally add this individual country feature to CONFIG.countries\n  // CONFIG.countries.addLayer(feature);\n  feature.addTo(CONFIG.countries);\n}\n\n// define what happens when we click a country\nfunction clickCountry(e) {\n  // exit early if we are at high zoom\n  if (CONFIG.map.getZoom() > 7) return;\n  // clear the map search input\n  $('form#search input').val('');\n  // get the name of the clicked country, and keep a reference to it\n  var name = e.target.feature.properties['NAME'];\n  CONFIG.selected_country.name = name;\n  highlightCountryLayer(e.target.feature);\n  // call the search function\n  searchCountry(name, e.target._bounds);\n}\n\nfunction highlightCountryLayer(feature) {\n  // highlight it on the map, first clearning any existing selection\n  CONFIG.selected_country.layer.clearLayers();\n  CONFIG.selected_country.layer.addData(feature);\n}\n\n// remove the current basemap from the view\nfunction removeCurrentBasemap() {\n  Object.keys(CONFIG.basemaps).forEach(function(basemap) {\n    CONFIG.map.removeLayer(CONFIG.basemaps[basemap]);\n    CONFIG.map.removeLayer(CONFIG.basemaps.labels);\n  });\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n///// SEARCH FUNCTIONS\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n// a simple search filter on an array of named fields\n// input \"array\" is assumed to be an array of objects:\n// [{'country': 'Canada', 'company': 'ABC'}, {'country': 'China', 'company', 'Acme Energy'}]\n// query is the query string\n// https://stackoverflow.com/a/44313087/1193155\nfunction searchObject(array, query, fields) {\n  return array.filter(function (o) {\n    return fields.some(function (k) {\n      // if fields contain numbers, then cast to string with String(o[k])\n      return o[k].toLowerCase().includes(query.toLowerCase());\n    });\n  });\n}\n\n// similar function to search a simple array of values by a string\nfunction searchArray(array, query) {\n  return array.filter(function(o) {\n    return o.toLowerCase().includes(query.toLowerCase());\n  })\n}\n\n// searches all data for keyword(s)\nfunction searchForText() {\n  // get the keywords to search\n  var query = $('form#search input#mapsearch').val();\n\n  // extract the fields to search, from the selected 'search category' options\n  let category = $('select#search-category').val();\n\n  // filter the object for the term in the included fields\n  DATA.filtered = searchObject(DATA.tracker_data, query, CONFIG.search_categories[category]);\n\n  // suggestions: if the search category is \"company\", include a list of suggestions below \n  var suggestions = $('div#suggestions').empty();\n  if (category == 'parent') {\n    suggestions.show();\n    var companies = searchArray(DATA.companies, query).sort();\n    companies.forEach(function(company) {\n      var entry = $('<div>', {'class': 'suggestion', text: company}).appendTo(suggestions);\n      entry.mark(query);\n    });\n  }\n\n  // add the results to map, table, legend\n  drawMap(DATA.filtered);                              // update the map (and legend)\n  updateResultsPanel(DATA.filtered, query)             // update the results-panel\n  drawTable(DATA.filtered, query);                     // populate the table\n  $('form#nav-table-search input').val(query);   // sync the table search input with the query\n  CONFIG.selected_country.layer.clearLayers();   // clear any selected country\n  CONFIG.selected_country.name = '';             // ... and reset the name\n  $('div#country-results').show();               // show the results panel, in case hidden\n  $('a.clear-search').show();                    // show the clear search links\n\n  return false;\n}\n\n// The primary controller for rendering things\nfunction render(options) {\n  if (options === undefined) options = {};\n  // If defined, take as given, otherwise, assign the default value as stated\n  options.name          = options.name         !== undefined ? options.name : CONFIG.default_title;\n  options.map           = options.map          !== undefined ? options.map : true;\n  options.results       = options.results      !== undefined ? options.results : true;\n  options.table         = options.table        !== undefined ? options.table : true;\n  options.force_redraw  = options.force_redraw !== undefined ? options.force_redraw : false;\n  options.fitbounds     = options.fitbounds    !== undefined ? options.fitbounds : true;\n\n  // optionally draw the map (and legend) table, results\n  $('div.searchwrapper a.clear-search').hide();\n  if (options.map)     drawMap(DATA.tracker_data, options.force_redraw, options.fitbounds);\n  if (options.results) updateResultsPanel(DATA.tracker_data);\n  if (options.table)   drawTable(DATA.tracker_data, options.name);\n}\n\n// zoom to the bounds of the country, and continue to show items outside of its boundaries\nfunction searchCountry(name, bounds, delay=1) {\n  // get the data for this country, *only* for updating the results panel\n  // the map and table, continue to show all data\n  var data = [];\n  // search the data for matches to the country name\n  DATA.tracker_data.forEach(function(feature) {\n    // look for matching names in feature.properties.countries\n    if (name == feature.country) data.push(feature);\n  });\n\n  // because we are not filtering the map, but only changing the bounds\n  // results on the map can easily get out of sync due to a previous search filter\n  // so first we need to explicity render() the map with all data, but not the table or results\n  render({ name: name, map: true, results: false, table: false, fitbounds: false });\n  // THEN update results panel for *this* country data only\n  updateResultsPanel(data, name);\n  // THEN the table, with all data, but not with this name\n  // may seem superfluous, but important to keep the map/table in sync, and showing all data\n  drawTable(DATA.tracker_data);\n\n  // Last step: zoom the map to the selected country\n  // some countries require special/custom bounds calcs, because they straddle the dateline or are otherwise non-standard\n  switch (name) {\n    case 'Russia':\n      bounds = L.latLngBounds([38.35400, 24], [78.11962,178]);\n      break;\n    case 'United States':\n      bounds = L.latLngBounds([18.3, -172.6], [71.7,-67.4]);\n      break;\n    case 'Canada':\n      bounds = L.latLngBounds([41.6, -141.0], [81.7,-52.6]);\n      break;\n    default:\n      break;\n  }\n  setTimeout(function() {\n    CONFIG.map.fitBounds(bounds);\n  }, delay)\n}\n\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n///// SHIMS AND UTILITIES: Various polyfills to add functionality\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\n// trim() function\nif(!String.prototype.trim) { String.prototype.trim = function () {return this.replace(/^\\s+|\\s+$/g,'');};}\n\n// string Capitalize\nString.prototype.capitalize = function() { return this.charAt(0).toUpperCase() + this.slice(1);}\n\n// check if a div has a horizontal scrollbar\n$.fn.hasHorizontalScrollBar = function() {return this.get(0).scrollWidth > this.get(0).clientWidth; }\n\n// get an object's keys\nObject.keys||(Object.keys=function(){\"use strict\";var t=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable(\"toString\"),e=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],o=e.length;return function(n){if(\"object\"!=typeof n&&(\"function\"!=typeof n||null===n))throw new TypeError(\"Object.keys called on non-object\");var c,l,p=[];for(c in n)t.call(n,c)&&p.push(c);if(r)for(l=0;o>l;l++)t.call(n,e[l])&&p.push(e[l]);return p}}());\n\n// get a string's Troper Case\nString.prototype.toTitleCase=function(){var e,r,t,o,n;for(t=this.replace(/([^\\W_]+[^\\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),o=[\"A\",\"An\",\"The\",\"And\",\"But\",\"Or\",\"For\",\"Nor\",\"As\",\"At\",\"By\",\"For\",\"From\",\"In\",\"Into\",\"Near\",\"Of\",\"On\",\"Onto\",\"To\",\"With\"],e=0,r=o.length;r>e;e++)t=t.replace(new RegExp(\"\\\\s\"+o[e]+\"\\\\s\",\"g\"),function(e){return e.toLowerCase()});for(n=[\"Id\",\"Tv\"],e=0,r=n.length;r>e;e++)t=t.replace(new RegExp(\"\\\\b\"+n[e]+\"\\\\b\",\"g\"),n[e].toUpperCase());return t};\n\n// function to indicate whether we are likely being viewed on a touch device\nfunction isTouch() { return !!(\"ontouchstart\" in window) || window.navigator.msMaxTouchPoints > 0; }\n\n// function to detect if we are likely being view on iPad\nfunction isIpad() { return (navigator.userAgent.match(/iPad/i)) && (navigator.userAgent.match(/iPad/i)!= null); }\n\n// variable to show if we are are on a device with a small window\nfunction isMobile() { return $(window).width() < 768 }\n\n// reduce arrays to unique items\nconst uniq = (a) => { return Array.from(new Set(a));}\n\n// String includes\nif (!String.prototype.includes) {\n  String.prototype.includes = function(search, start) {\n    'use strict';\n    if (typeof start !== 'number') start = 0;\n\n    if (start + search.length > this.length) {\n      return false;\n    } else {\n      return this.indexOf(search, start) !== -1;\n    }\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./index.js","(function(global){\n\n//\n// Check for native Promise and it has correct interface\n//\n\nvar NativePromise = global['Promise'];\nvar nativePromiseSupported =\n  NativePromise &&\n  // Some of these methods are missing from\n  // Firefox/Chrome experimental implementations\n  'resolve' in NativePromise &&\n  'reject' in NativePromise &&\n  'all' in NativePromise &&\n  'race' in NativePromise &&\n  // Older version of the spec had a resolver object\n  // as the arg rather than a function\n  (function(){\n    var resolve;\n    new NativePromise(function(r){ resolve = r; });\n    return typeof resolve === 'function';\n  })();\n\n\n//\n// export if necessary\n//\n\nif (typeof exports !== 'undefined' && exports)\n{\n  // node.js\n  exports.Promise = nativePromiseSupported ? NativePromise : Promise;\n  exports.Polyfill = Promise;\n}\nelse\n{\n  // AMD\n  if (typeof define == 'function' && define.amd)\n  {\n    define(function(){\n      return nativePromiseSupported ? NativePromise : Promise;\n    });\n  }\n  else\n  {\n    // in browser add to global\n    if (!nativePromiseSupported)\n      global['Promise'] = Promise;\n  }\n}\n\n\n//\n// Polyfill\n//\n\nvar PENDING = 'pending';\nvar SEALED = 'sealed';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar NOOP = function(){};\n\nfunction isArray(value) {\n  return Object.prototype.toString.call(value) === '[object Array]';\n}\n\n// async calls\nvar asyncSetTimer = typeof setImmediate !== 'undefined' ? setImmediate : setTimeout;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush(){\n  // run promise callbacks\n  for (var i = 0; i < asyncQueue.length; i++)\n    asyncQueue[i][0](asyncQueue[i][1]);\n\n  // reset async asyncQueue\n  asyncQueue = [];\n  asyncTimer = false;\n}\n\nfunction asyncCall(callback, arg){\n  asyncQueue.push([callback, arg]);\n\n  if (!asyncTimer)\n  {\n    asyncTimer = true;\n    asyncSetTimer(asyncFlush, 0);\n  }\n}\n\n\nfunction invokeResolver(resolver, promise) {\n  function resolvePromise(value) {\n    resolve(promise, value);\n  }\n\n  function rejectPromise(reason) {\n    reject(promise, reason);\n  }\n\n  try {\n    resolver(resolvePromise, rejectPromise);\n  } catch(e) {\n    rejectPromise(e);\n  }\n}\n\nfunction invokeCallback(subscriber){\n  var owner = subscriber.owner;\n  var settled = owner.state_;\n  var value = owner.data_;  \n  var callback = subscriber[settled];\n  var promise = subscriber.then;\n\n  if (typeof callback === 'function')\n  {\n    settled = FULFILLED;\n    try {\n      value = callback(value);\n    } catch(e) {\n      reject(promise, e);\n    }\n  }\n\n  if (!handleThenable(promise, value))\n  {\n    if (settled === FULFILLED)\n      resolve(promise, value);\n\n    if (settled === REJECTED)\n      reject(promise, value);\n  }\n}\n\nfunction handleThenable(promise, value) {\n  var resolved;\n\n  try {\n    if (promise === value)\n      throw new TypeError('A promises callback cannot return that same promise.');\n\n    if (value && (typeof value === 'function' || typeof value === 'object'))\n    {\n      var then = value.then;  // then should be retrived only once\n\n      if (typeof then === 'function')\n      {\n        then.call(value, function(val){\n          if (!resolved)\n          {\n            resolved = true;\n\n            if (value !== val)\n              resolve(promise, val);\n            else\n              fulfill(promise, val);\n          }\n        }, function(reason){\n          if (!resolved)\n          {\n            resolved = true;\n\n            reject(promise, reason);\n          }\n        });\n\n        return true;\n      }\n    }\n  } catch (e) {\n    if (!resolved)\n      reject(promise, e);\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction resolve(promise, value){\n  if (promise === value || !handleThenable(promise, value))\n    fulfill(promise, value);\n}\n\nfunction fulfill(promise, value){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = value;\n\n    asyncCall(publishFulfillment, promise);\n  }\n}\n\nfunction reject(promise, reason){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = reason;\n\n    asyncCall(publishRejection, promise);\n  }\n}\n\nfunction publish(promise) {\n  var callbacks = promise.then_;\n  promise.then_ = undefined;\n\n  for (var i = 0; i < callbacks.length; i++) {\n    invokeCallback(callbacks[i]);\n  }\n}\n\nfunction publishFulfillment(promise){\n  promise.state_ = FULFILLED;\n  publish(promise);\n}\n\nfunction publishRejection(promise){\n  promise.state_ = REJECTED;\n  publish(promise);\n}\n\n/**\n* @class\n*/\nfunction Promise(resolver){\n  if (typeof resolver !== 'function')\n    throw new TypeError('Promise constructor takes a function argument');\n\n  if (this instanceof Promise === false)\n    throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\n  this.then_ = [];\n\n  invokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n  constructor: Promise,\n\n  state_: PENDING,\n  then_: null,\n  data_: undefined,\n\n  then: function(onFulfillment, onRejection){\n    var subscriber = {\n      owner: this,\n      then: new this.constructor(NOOP),\n      fulfilled: onFulfillment,\n      rejected: onRejection\n    };\n\n    if (this.state_ === FULFILLED || this.state_ === REJECTED)\n    {\n      // already resolved, call callback async\n      asyncCall(invokeCallback, subscriber);\n    }\n    else\n    {\n      // subscribe\n      this.then_.push(subscriber);\n    }\n\n    return subscriber.then;\n  },\n\n  'catch': function(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nPromise.all = function(promises){\n  var Class = this;\n\n  if (!isArray(promises))\n    throw new TypeError('You must pass an array to Promise.all().');\n\n  return new Class(function(resolve, reject){\n    var results = [];\n    var remaining = 0;\n\n    function resolver(index){\n      remaining++;\n      return function(value){\n        results[index] = value;\n        if (!--remaining)\n          resolve(results);\n      };\n    }\n\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolver(i), reject);\n      else\n        results[i] = promise;\n    }\n\n    if (!remaining)\n      resolve(results);\n  });\n};\n\nPromise.race = function(promises){\n  var Class = this;\n\n  if (!isArray(promises))\n    throw new TypeError('You must pass an array to Promise.race().');\n\n  return new Class(function(resolve, reject) {\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolve, reject);\n      else\n        resolve(promise);\n    }\n  });\n};\n\nPromise.resolve = function(value){\n  var Class = this;\n\n  if (value && typeof value === 'object' && value.constructor === Class)\n    return value;\n\n  return new Class(function(resolve){\n    resolve(value);\n  });\n};\n\nPromise.reject = function(reason){\n  var Class = this;\n\n  return new Class(function(resolve, reject){\n    reject(reason);\n  });\n};\n\n})(typeof window != 'undefined' ? window : typeof global != 'undefined' ? global : typeof self != 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/es6-promise-polyfill/promise.js\n// module id = 3\n// module chunks = 0","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/timers-browserify/main.js\n// module id = 4\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/setimmediate/setImmediate.js\n// module id = 5\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 6\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"status1\":\"#f3ff00\",\"status2\":\"orange\",\"status3\":\"#F26C4F\",\"status4\":\"red\",\"status5\":\"#5974a2\",\"status6\":\"#58a1a1\",\"status7\":\"#4CDB4C\",\"status8\":\"#845440\",\"status9\":\"#d6a490\",\"circlesize\":\"12\",\"circlesize_mobile\":\"14\",\"circleopacity\":\".85\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.scss\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}