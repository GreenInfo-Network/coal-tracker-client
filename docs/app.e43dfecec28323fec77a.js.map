{"version":3,"sources":["webpack:///app.e43dfecec28323fec77a.js","webpack:///webpack/bootstrap e43dfecec28323fec77a","webpack:///(webpack)/buildin/global.js","webpack:///./index.js","webpack:///./node_modules/es6-promise-polyfill/promise.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/process/browser.js","webpack:///./index.scss"],"names":["e","__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","g","this","Function","eval","window","resize","height","$","CONFIG","map","invalidateSize","tablediv","length","value","width","hasHorizontalScrollBar","css","table","columns","adjust","draw","initData","url","Promise","resolve","reject","data","drawMap","arguments","fitbounds","statuses","trackers","forEach","tracker","status","indexOf","push","clusters","RemoveMarkers","feature","statusId","status_types","id","cssClass","marker","PruneCluster","Marker","parseFloat","lat","lng","title","unit","icon","L","divIcon","className","iconSize","attributes","coordinates","category","parseInt","RegisterMarker","status_markers","markers","ProcessView","cluster_bounds","Cluster","ComputeGlobalBounds","bounds","minLat","minLng","maxLat","maxLng","homebounds","setTimeout","fitBounds","center","getCenter","zoom","getBoundsZoom","setView","once","getBounds","show","target","html","label","type","attr","appendTo","container","class","style","color","text","drawTable","names","keys","index","inArray","splice","colnames","each","k","obj","row","tableElement","clear","rows","add","search","DataTable","columnDefs","targets","visible","searchable","autoWidth","scrollY","scrollX","lengthMenu","iDisplayLength","dom","deferRender","default_title","updateResultsPanel","country","totalrow","empty","totaltext","toLocaleString","resetTheMap","val","render","force_redraw","selected_country","layer","clearLayers","click","massageCountryFeaturesAsTheyLoad","rawdata","properties","NAME","navigator","msMaxTouchPoints","isMobile","userAgent","match","on","getZoom","hovered","countries","setStyle","country_no_style","country_hover_style","clickCountry","addTo","highlightCountryLayer","searchCountry","_bounds","addData","removeCurrentBasemap","basemaps","basemap","removeLayer","labels","options","results","hide","DATA","tracker_data","delay","country_lookup","latLngBounds","r","require","hybrid","tileLayer","pane","satellite","gridLayer","googleMutant","attribution","default_basemap","outerring","minzoom","maxzoom","maskstyle","stroke","fillColor","fillOpacity","country_selected_style","opacity","chinese_name","plant","sponsor","parent","capacity","region","subnational","year","announced","styles","status1","pre-permit","status2","permitted","status3","construction","status4","shelved","status5","retired","status6","cancelled","status7","operating","status8","mothballed","status9","markercluster_colors","v","search_categories","all","location","search_category_columns","search_placeholder","document","ready","then","country_data","lookup","Papa","parse","header","Name_map","Name_csv","closest","submit","siblings","trigger","dataset","split","latlng","latLng","addLayer","prop","oldbounds","back","backButton","Control","extend","position","onAdd","DomUtil","create","_map","button","control","href","innerHTML","DomEvent","addListener","stopPropagation","preventDefault","goBack","remove","currentTarget","searchengine","elasticlunr","addField","setRef","addDoc","placeholder","keyup","_","debounce","keywords","bool","expand","fields","result","doc","cols","filter","ids","attributionControl","zoomControl","minZoom","maxZoom","writable","createPane","getPane","zIndex","pointerEvents","addAttribution","mask","featureGroup","polygon","geoJson","onEachFeature","cluster_layer","layercontrol","change","selected","baselayer","FilterMarkers","PruneClusterForLeaflet","BuildLeafletClusterIcon","cluster","Icon","MarkerCluster","stats","population","pi2","Math","PI","Point","createIcon","createElement","_setIconStyles","x","y","getContext","createShadow","canvas","start","size","beginPath","moveTo","fillStyle","gap","from","to","arc","lineTo","fill","closePath","textAlign","textBaseline","font","fillText","BuildLeafletCluster","_this","markersArea","FindMarkersInArea","ComputeBounds","fire","getLatLng","PrepareLeafletMarker","leafletMarker","bindPopup","setIcon","popup","dataname","wiki","modal","openPopup","closePopup","filtered","params","URLSearchParams","place","place_lookup","toTitleCase","eachLayer","hasClass","addClass","find","toggleClass","off","removeClass","String","trim","replace","capitalize","charAt","toUpperCase","slice","fn","scrollWidth","clientWidth","toString","propertyIsEnumerable","_typeof","TypeError","substr","toLowerCase","RegExp","global","setImmediate","__WEBPACK_AMD_DEFINE_RESULT__","isArray","asyncFlush","asyncQueue","asyncTimer","asyncCall","callback","arg","asyncSetTimer","invokeCallback","subscriber","owner","settled","state_","data_","promise","FULFILLED","handleThenable","REJECTED","resolved","fulfill","reason","PENDING","SEALED","publishFulfillment","publishRejection","publish","callbacks","then_","resolver","rejectPromise","NativePromise","nativePromiseSupported","Polyfill","NOOP","constructor","onFulfillment","onRejection","fulfilled","rejected","catch","promises","remaining","race","self","Timeout","clearFn","_id","_clearFn","scope","apply","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","process","undefined","handle","tasksByHandle","runIfPresent","currentlyRunningATask","task","args","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","attachTo","getPrototypeOf","nextTick","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","random","event","source","addEventListener","attachEvent","MessageChannel","port1","port2","documentElement","script","onreadystatechange","removeChild","appendChild","Array","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","len","run","cachedClearTimeout","Item","array","noop","browser","env","argv","version","versions","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","circlesize","circlesize_mobile","circleopacity"],"mappings":"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","file":"app.e43dfecec28323fec77a.js","sourcesContent":["!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(2)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(7),r=n.n(a),o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};var i,s,c,l,u=n(3).Promise,p={},d={};function f(){(n=$(window).height()-54)>1e3&&(n=1e3),$(\"div#map\").height(n-8),p.map.invalidateSize(),$(\"div.content\").height(n);var e=$(\".dataTables_scrollBody\");if(e.length){var t=$(window).width()<768?273:265;e.hasHorizontalScrollBar()&&(t+=10);var n=$(\"body\").height()-t;e.css(\"height\",n),p.table.columns.adjust().draw()}}function m(e){return new u(function(t,n){$.get(e,function(e){t(e)})})}function h(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=[],a=[];e.forEach(function(e){var t=e.status;t&&(n.indexOf(t)<0&&n.push(t),a.push(e))}),function(e,t){p.clusters.RemoveMarkers(),e.forEach(function(e){var t=e.status,n=p.status_types[t].id,a=\"status\"+(n+1),r=new PruneCluster.Marker(parseFloat(e.lat),parseFloat(e.lng),{title:e.unit,icon:L.divIcon({className:\"circle-div \"+a,iconSize:[15,15]})});r.data.attributes=e,r.data.coordinates=[e.lat,e.lng],r.category=parseInt(n),p.clusters.RegisterMarker(r),p.status_markers[t].markers.push(r)}),p.clusters.ProcessView();var n=p.clusters.Cluster.ComputeGlobalBounds();if(n)var a=[[n.minLat,n.minLng],[n.maxLat,n.maxLng]];else a=p.homebounds;t&&setTimeout(function(){if(p.map.fitBounds(a),!p.homebounds){var e=p.map.getCenter(),t=p.map.getBoundsZoom(a,!0);p.map.setView([e.lat,e.lng],t),p.map.once(\"moveend zoomend\",function(){p.homebounds=p.homebounds||p.map.getBounds()})}},200)}(a,t),function(e){$(\"#status-layer-wrapper\").show();var t=$(\"#status-layers\").html(\"\");e.forEach(function(e){var n=$(\"<label>\"),a=$(\"<input>\",{type:\"checkbox\",value:e}).attr(\"checked\",\"checked\");a.appendTo(n);var r=$(\"<span>\",{class:\"legend-container\"}).appendTo(n);$(\"<div>\",{style:\"background:\"+p.status_types[e].color,class:\"circle\"}).appendTo(r),$(\"<span>\",{text:\" \"+p.status_types[e].text}).appendTo(r);n.appendTo(t)})}(n)}function y(e,t){var n=$.map(p.attributes,function(e){return e}),a=Object.keys(p.attributes),r=$.inArray(\"url\",a);n.splice(r,1),a.splice(r,1);var o=[];$.each(n,function(e,t){var n={};n.title=t.name,o.push(n)});var i=[];e.forEach(function(e){var t=[];$.each(a,function(n,a){\"unit\"!=a&&t.push(e[a])}),t.splice(1,0,'<a href=\"'+e.url+'\" target=\"_blank\" title=\"click to open the Wiki page for this project\">'+e.unit+\"</a>\"),i.push(t)});var s=$(\"#table-content table\");p.table?(p.table.clear(),p.table.rows.add(i),p.table.search(\"\").draw()):p.table=s.DataTable({data:i,columnDefs:[{targets:[0],visible:!1,searchable:!1}],columns:o,autoWidth:!0,scrollY:\"1px\",scrollX:!0,lengthMenu:[50,100,500],iDisplayLength:500,dom:\"litp\",deferRender:!0});var c=t||p.default_title;$(\"div#table h3 span\").text(c)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.default_title;$(\"div#country-results div#results-title h3\").text(t);var n=$(\"div#country-results div#total-count\").empty(),a=e.length>0?e.length>1?\"Tracking \"+e.length.toLocaleString()+\" coal-fired units\":\"Tracking \"+e.length+\" coal project\":\"Nothing found\";$(\"<div>\",{text:a}).appendTo(n)}function b(){$(\"form.search-form input\").val(\"\"),p.homebounds?(x({force_redraw:!0,fitbounds:!1}),p.map.fitBounds(p.homebounds)):x({force_redraw:!0}),p.selected_country.layer.clearLayers(),p.selected_country.name=\"\",$(\"input#map-tab\").click(),f()}function g(e,t){t.name=e.properties.NAME,(\"ontouchstart\"in window||window.navigator.msMaxTouchPoints>0)&&(I()||navigator.userAgent.match(/iPad/i)&&null!=navigator.userAgent.match(/iPad/i))||t.on(\"mouseover\",function(e){if(!(p.map.getZoom()>7)){var t=this.feature.properties.NAME;p.selected_country.name!=t&&(t!=p.hovered&&p.countries.setStyle(p.country_no_style),p.hovered=t,this.setStyle(p.country_hover_style))}}).on(\"mouseout\",function(e){var t=this.feature.properties.NAME;p.selected_country.name!=t&&this.setStyle(p.country_no_style)}),t.on(\"click\",k),t.addTo(p.countries)}function k(e){if(!(p.map.getZoom()>7)){$(\"form#search input\").val(\"\");var t=e.target.feature.properties.NAME;p.selected_country.name=t,w(e.target.feature),P(t,e.target._bounds)}}function w(e){p.selected_country.layer.clearLayers(),p.selected_country.layer.addData(e)}function T(){Object.keys(p.basemaps).forEach(function(e){p.map.removeLayer(p.basemaps[e]),p.map.removeLayer(p.basemaps.labels)})}function x(e){void 0===e&&(e={}),e.name=void 0!==e.name?e.name:p.default_title,e.map=void 0===e.map||e.map,e.results=void 0===e.results||e.results,e.table=void 0===e.table||e.table,e.force_redraw=void 0!==e.force_redraw&&e.force_redraw,e.fitbounds=void 0===e.fitbounds||e.fitbounds,$(\"div.searchwrapper a.clear-search\").hide(),e.map&&h(d.tracker_data,e.force_redraw,e.fitbounds),e.results&&v(d.tracker_data),e.table&&y(d.tracker_data,e.name)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=[];e=d.country_lookup[e];switch(d.tracker_data.forEach(function(t){e==t.country&&a.push(t)}),x({name:e,map:!0,results:!1,table:!1,fitbounds:!1}),v(a,e),y(d.tracker_data),e){case\"Russia\":t=L.latLngBounds([38.354,24],[78.11962,178]);break;case\"United States\":t=L.latLngBounds([18.3,-172.6],[71.7,-67.4]);break;case\"Canada\":t=L.latLngBounds([41.6,-141],[81.7,-52.6])}setTimeout(function(){p.map.fitBounds(t)},n)}function I(){return $(window).width()<768}p.basemaps={hybrid:L.tileLayer(\"https://{s}.tiles.mapbox.com/v3/greeninfo.map-zudfckcw/{z}/{x}/{y}.jpg\",{pane:\"hybrid\"}),satellite:L.gridLayer.googleMutant({type:\"satellite\",pane:\"satellite\"}),basemap:L.tileLayer(\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}.png\",{attribution:\"©OpenStreetMap, ©CARTO\",pane:\"basemap\"}),labels:L.tileLayer(\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png\",{pane:\"labels\"})},p.default_basemap=\"basemap\",p.default_title=\"Worldwide\",p.outerring=[[-90,-360],[-90,360],[90,360],[90,-360],[-90,-360]],p.minzoom=2,p.maxzoom=17,p.maskstyle={stroke:!1,fillColor:\"#999\",fillOpacity:.2,className:\"mask\"},p.country_hover_style={stroke:!1,fillColor:\"#fffef4\",fillOpacity:.9},p.country_selected_style={stroke:!1,fillColor:\"#fff\",fillOpacity:1},p.country_no_style={opacity:0,fillOpacity:0},p.attributes={id:{name:\"Tracker ID\"},unit:{name:\"Unit\"},chinese_name:{name:\"Chinese name\"},plant:{name:\"Plant\"},url:{name:\"Wiki page\"},sponsor:{name:\"Sponsor\"},parent:{name:\"Parent\"},capacity:{name:\"Capacity (MW)\"},status:{name:\"Status\"},region:{name:\"Region\"},country:{name:\"Country\"},subnational:{name:\"Subnational unit (province/state)\"},year:{name:\"Start year\"}},p.status_types={announced:{id:0,text:\"Announced\",color:r.a.status1},\"pre-permit\":{id:1,text:\"Pre-permit\",color:r.a.status2},permitted:{id:2,text:\"Permitted\",color:r.a.status3},construction:{id:3,text:\"Construction\",color:r.a.status4},shelved:{id:4,text:\"Shelved\",color:r.a.status5},retired:{id:5,text:\"Retired\",color:r.a.status6},cancelled:{id:6,text:\"Cancelled\",color:r.a.status7},operating:{id:7,text:\"Operating\",color:r.a.status8},mothballed:{id:8,text:\"Mothballed\",color:r.a.status9}},p.status_markers={announced:{markers:[]},\"pre-permit\":{markers:[]},permitted:{markers:[]},construction:{markers:[]},shelved:{markers:[]},retired:{markers:[]},cancelled:{markers:[]},operating:{markers:[]},mothballed:{markers:[]}},p.markercluster_colors=Object.keys(p.status_types).map(function(e){return p.status_types[e].color}),p.search_categories={all:{unit:{},plant:{},parent:{},region:{},country:{},subnational:{},year:{}},unit:{unit:{},plant:{}},parent:{parent:{}},location:{region:{},country:{},subnational:{}},year:{year:{}}},p.search_category_columns={all:[0,4,7,8,9,10],unit:[0],parent:[4],location:[7,8,9],year:[10]},p.search_placeholder={all:\"project name, company, country\",unit:\"unit name, plant name\",parent:\"company name\",location:\"place name\",year:\"year (e.g. 2010)\"},$(document).ready(function(){u.all([m(\"./data/trackers.json\"),m(\"./data/countries.json\"),m(\"./data/country_lookup.csv\")]).then(function(e){!function(e){d.country_data=e[1];var t=Papa.parse(e[2],{header:!0});d.country_lookup={},t.data.forEach(function(e,t){d.country_lookup[e.Name_map]=e.Name_csv}),d.tracker_data=e[0]}(e),$(\"div a#reset-button\").on(\"click\",function(){b()}),$(\"form.search-form span.glyphicon-search\").on(\"click\",function(){I()||$(this).closest(\"form\").submit()}),$(\"div.close\").on(\"click\",function(){$(this).parent().hide()}),$(\"#layers-icon\").on(\"click\",function(){$(\"div.layer-control\").show()}),$(\"div#results-icon\").on(\"click\",function(){$(\"div#country-results\").show()}),$(\"div.searchwrapper a.clear-search\").on(\"click\",function(){$(this).siblings(\"input\").val(\"\").trigger(\"keyup\"),$(this).hide()}),$(\"#btn-zoom\").click(function(){var e=this.dataset.zoom.split(\",\"),t=L.latLng([e[0],e[1]]);T(),p.map.addLayer(p.basemaps.satellite),$('#layers-base input[data-baselayer=\"satellite\"]').prop(\"checked\",!0),p.countries.setStyle(p.country_no_style),p.selected_country.name=\"\",p.selected_country.layer.clearLayers(),p.oldbounds=p.map.getBounds(),0==$(\".btn-back\").length&&p.back.addTo(p.map),p.map.setView(t,16)}),L.backButton=L.Control.extend({options:{position:\"bottomleft\"},onAdd:function(e){var t=L.DomUtil.create(\"div\",\"btn btn-primary btn-back\",t);t.title=\"Click to go back to the previous view\",this._map=e;var n=L.DomUtil.create(\"a\",\"active\",t);return n.control=this,n.href=\"javascript:void(0);\",n.innerHTML='<span class=\"glyphicon glyphicon-chevron-left\"></span> Go back to country view',L.DomEvent.addListener(n,\"click\",L.DomEvent.stopPropagation).addListener(n,\"click\",L.DomEvent.preventDefault).addListener(n,\"click\",function(){this.control.goBack()}),t},goBack:function(){p.map.fitBounds(p.oldbounds),T(),p.map.addLayer(p.basemaps.basemap),$('#layers-base input[data-baselayer=\"basemap\"]').prop(\"checked\",!0),p.back.remove(p.map)}}),$(\"input.tab\").on(\"click\",function(e){var t=e.currentTarget.id.split(\"-\")[0];switch(t){case\"map\":p.map.invalidateSize(!1),$(\"form.search-form\").show();break;case\"table\":$(\"form.search-form\").show(),p.table&&f();break;default:$(\"form.search-form\").hide()}}),p.searchengine=elasticlunr(function(){this.addField(\"sponsor\"),this.addField(\"parent\"),this.addField(\"unit\"),this.addField(\"plant\"),this.addField(\"country\"),this.addField(\"region\"),this.addField(\"subnational\"),this.addField(\"year\"),this.setRef(\"id\")}),d.tracker_data.forEach(function(e){p.searchengine.addDoc(e)}),$(\"select#search-category\").on(\"change\",function(){var e=$(this).val(),t=p.search_placeholder[e];$(\"input#mapsearch, input#tablesearch\").attr(\"placeholder\",t)}),$(\"form#search input\").keyup(_.debounce(function(){if(!this.value)return x();$(this).submit()},300)),$(\"form#search\").submit(function(e){if(e.preventDefault(),$(\"form#search input\").val()){var t=$(\"input.tab:checked\").data(\"tab\");\"map\"==t?function(){var e=$(\"form#search input\").val(),t={bool:\"AND\",expand:!0},n=$(\"select#search-category\").val();t.fields={unit:{},plant:{},sponsor:{}},t.fields=p.search_categories[n];var a=[];p.searchengine.search(e,t).forEach(function(e){a.push(e.doc)}),h(a),v(a,e),y(a,e),$(\"form#nav-table-search input\").val(e),p.selected_country.layer.clearLayers(),p.selected_country.name=\"\",$(\"div#country-results\").show(),$(\"a.clear-search\").show()}():function(){var e=$(\"form#search input\").val();e&&$(\"div#table h3 span\").text(e);var t=$(\"select#search-category\").val(),n=p.search_category_columns[t];p.table.columns(n).search(e).draw(),_.debounce(function(){var t=p.table.rows({filter:\"applied\"}).data(),n=t.map(function(e){return e[0]}),t=[];d.tracker_data.forEach(function(e){n.indexOf(e.id)>-1&&t.push(e)}),h(t),$(\"form#search input\").val(e),p.selected_country.layer.clearLayers(),v(t,e),$(\"a.clear-search\").show()},500,!1)()}()}}),function(){p.map=L.map(\"map\",(e={attributionControl:!1,zoomControl:!1,minZoom:p.minzoom,maxZoom:p.maxzoom},t=\"attributionControl\",n=!1,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),L.control.zoom({position:\"topright\"}).addTo(p.map),p.map.createPane(\"basemap\"),p.map.getPane(\"basemap\").style.zIndex=300,p.map.getPane(\"basemap\").style.pointerEvents=\"none\",p.map.createPane(\"hybrid\"),p.map.getPane(\"hybrid\").style.zIndex=301,p.map.getPane(\"hybrid\").style.pointerEvents=\"none\",p.map.createPane(\"satellite\"),p.map.getPane(\"satellite\").style.zIndex=302,p.map.getPane(\"satellite\").style.pointerEvents=\"none\",p.map.createPane(\"labels\"),p.map.getPane(\"labels\").style.zIndex=475,p.map.getPane(\"labels\").style.pointerEvents=\"none\",p.map.createPane(\"country-mask\"),p.map.getPane(\"country-mask\").style.zIndex=320,p.map.createPane(\"country-hover\"),p.map.getPane(\"country-hover\").style.zIndex=350,p.map.createPane(\"country-select\"),p.map.getPane(\"country-select\").style.zIndex=450,p.map.createPane(\"feature-pane\"),p.map.getPane(\"feature-pane\").style.zIndex=550,L.control.attribution().addTo(p.map).addAttribution('Interactive mapping by <a href=\"http://greeninfo.org\" target=\"_blank\">GreenInfo Network</a>. Data: <a href=\"https://globalenergymonitor.org/\" target=\"_blank\">Global Energy Monitor</a>'),p.mask=L.featureGroup([L.polygon(p.outerring)],{pane:\"country-mask\"}).addTo(p.map),p.mask.setStyle(p.maskstyle),p.countries=L.featureGroup([],{pane:\"country-hover\"}).addTo(p.map),L.geoJson(d.country_data,{style:p.country_no_style,onEachFeature:g}),p.selected_country={},p.selected_country.layer=L.geoJson([],{style:p.country_selected_style,pane:\"country-select\"}).addTo(p.map),p.cluster_layer=L.featureGroup([],{pane:\"feature-pane\"}).addTo(p.map);var e,t,n;var a=$(\".layer-control\");I()&&a.hide();p.map.on(\"load\",function(){f(),p.map.invalidateSize()}),p.back=new L.backButton,p.map.on(\"zoomend\",function(){p.map.getZoom()})}(),p.map.addLayer(p.basemaps.basemap),p.map.addLayer(p.basemaps.labels),$(\"#layers-base input\").change(function(){var e=$(this).data().baselayer;T(),p.map.addLayer(p.basemaps[e]),\"basemap\"==e&&p.map.addLayer(p.basemaps.labels)}),$(\"div.layer-control\").on(\"change\",\"#status-layers input\",function(){var e=$(this).val(),t=p.status_markers[e].markers;p.clusters.FilterMarkers(t,!$(this).prop(\"checked\")),p.clusters.ProcessView()}),function(){p.clusters=new PruneClusterForLeaflet(30),p.map.addLayer(p.clusters),p.clusters.BuildLeafletClusterIcon=function(e){var t=new L.Icon.MarkerCluster;return t.stats=e.stats,t.population=e.population,t};var e=2*Math.PI;L.Icon.MarkerCluster=L.Icon.extend({options:{iconSize:new L.Point(22,22),className:\"prunecluster leaflet-markercluster-icon\"},createIcon:function(){var e=document.createElement(\"canvas\");this._setIconStyles(e,\"icon\");var t=this.options.iconSize;return e.width=t.x,e.height=t.y,this.draw(e.getContext(\"2d\"),t.x,t.y),e},createShadow:function(){return null},draw:function(t,n,a){for(var r=0,o=0,i=p.markercluster_colors.length;o<i;++o){var s=this.stats[o]/this.population;if(s>0){t.beginPath(),t.moveTo(11,11),t.fillStyle=p.markercluster_colors[o];var c=1==s?0:.15,l=r+c,u=r+s*e;u<l&&(l=r),t.arc(11,11,11,l,u),r+=s*e,t.lineTo(11,11),t.fill(),t.closePath()}}t.beginPath(),t.fillStyle=\"white\",t.arc(11,11,7,0,2*Math.PI),t.fill(),t.closePath(),t.fillStyle=\"#555\",t.textAlign=\"center\",t.textBaseline=\"middle\",t.font=\"bold 9px sans-serif\",t.fillText(this.population,11,11,15)}}),p.clusters.BuildLeafletCluster=function(e,t){var n=this,a=new L.Marker(t,{icon:this.BuildLeafletClusterIcon(e)});return a.on(\"click\",function(){var t=n.Cluster.FindMarkersInArea(e.bounds),r=n.Cluster.ComputeBounds(t);r&&n._map.fire(\"overlappingmarkers\",{cluster:n,markers:t,center:a.getLatLng(),marker:a})}),a},p.clusters.PrepareLeafletMarker=function(e,t){var n=\"<div style='text-align:center;'><strong>\"+t.title+\"</strong><br><div class='popup-click-msg'>Click the circle for details</div></div>\";e.bindPopup(n),e.setIcon(t.icon),e.attributes=t.attributes,e.coordinates=t.coordinates,e.on(\"click\",function(){!function(e){var t=e.attributes,n=$(\"#tracker-modal\");$.each(t,function(e,t){\"status\"==e&&(t=p.status_types[t].text),$(\"#tracker-modal .modal-content span\").filter('[data-name=\"'+e+'\"]').text(t)});var a=t.url,r=$(\"#tracker-modal .modal-content span\").filter('[data-name=\"wiki_page\"]').text(\"\");$(\"<a>\",{text:a,href:a,target:\"_blank\"}).appendTo(r),$(\"#btn-zoom\").attr(\"data-zoom\",e.attributes.lat+\",\"+e.attributes.lng),n.modal()}(this)}),e.on(\"mouseover\",function(){this.openPopup()}),e.on(\"mouseout\",function(){p.map.closePopup()})},p.clusters.FilterMarkers=function(e,t){for(var n=0,a=e.length;n<a;++n)e[n].filtered=t}}(),function(){if((e=window.location.href).indexOf(\"?\")>-1){var e=new URLSearchParams(window.location.search),t=e.get(\"country\");if(t){var n=d.country_lookup[t.toTitleCase()];p.countries.eachLayer(function(e){if(e.name==n){var a=e.getBounds();P(t,a,2e3),y(d.tracker_data),w(e.feature)}})}else b()}else b()}(),setTimeout(function(){$(window).trigger(\"resize\"),$(\"div#pleasewait\").hide()},300)})}),$(window).resize(function(){f(),function(){var e=$(\"select#search-category\").val(),t=p.search_placeholder[e],n=$(\"input#mapsearch, input#tablesearch\");if($(window).width()<768){if(n.hasClass(\"collapsed\"))return;n.addClass(\"collapsed\"),setTimeout(function(){n.attr(\"placeholder\",\"\")},300),n.siblings().find(\"span.glyphicon-search\").on(\"click\",function(){n.toggleClass(\"collapsed\"),n.hasClass(\"collapsed\")?setTimeout(function(){n.attr(\"placeholder\",\"\"),n.val(\"\")},300):(n.attr(\"placeholder\",t),n.off(\"click\"))})}else n.removeClass(\"collapsed\"),n.attr(\"placeholder\",t)}()}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\\s+|\\s+$/g,\"\")}),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},$.fn.hasHorizontalScrollBar=function(){return this.get(0).scrollWidth>this.get(0).clientWidth},Object.keys||(Object.keys=(i=Object.prototype.hasOwnProperty,s=!{toString:null}.propertyIsEnumerable(\"toString\"),l=(c=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"]).length,function(e){if(\"object\"!=(void 0===e?\"undefined\":o(e))&&(\"function\"!=typeof e||null===e))throw new TypeError(\"Object.keys called on non-object\");var t,n,a=[];for(t in e)i.call(e,t)&&a.push(t);if(s)for(n=0;l>n;n++)i.call(e,c[n])&&a.push(c[n]);return a})),String.prototype.toTitleCase=function(){var e,t,n,a,r;for(n=this.replace(/([^\\W_]+[^\\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),e=0,t=(a=[\"A\",\"An\",\"The\",\"And\",\"But\",\"Or\",\"For\",\"Nor\",\"As\",\"At\",\"By\",\"For\",\"From\",\"In\",\"Into\",\"Near\",\"Of\",\"On\",\"Onto\",\"To\",\"With\"]).length;t>e;e++)n=n.replace(new RegExp(\"\\\\s\"+a[e]+\"\\\\s\",\"g\"),function(e){return e.toLowerCase()});for(e=0,t=(r=[\"Id\",\"Tv\"]).length;t>e;e++)n=n.replace(new RegExp(\"\\\\b\"+r[e]+\"\\\\b\",\"g\"),r[e].toUpperCase());return n}},function(e,t,n){(function(a,r){var o;!function(a){var i=a.Promise,s=i&&\"resolve\"in i&&\"reject\"in i&&\"all\"in i&&\"race\"in i&&function(){var e;return new i(function(t){e=t}),\"function\"==typeof e}();void 0!==t&&t?(t.Promise=s?i:P,t.Polyfill=P):void 0===(o=function(){return s?i:P}.call(t,n,t,e))||(e.exports=o);var c=\"pending\",l=\"sealed\",u=\"fulfilled\",p=\"rejected\",d=function(){};function f(e){return\"[object Array]\"===Object.prototype.toString.call(e)}var m,h=void 0!==r?r:setTimeout,y=[];function v(){for(var e=0;e<y.length;e++)y[e][0](y[e][1]);y=[],m=!1}function b(e,t){y.push([e,t]),m||(m=!0,h(v,0))}function g(e){var t=e.owner,n=t.state_,a=t.data_,r=e[n],o=e.then;if(\"function\"==typeof r){n=u;try{a=r(a)}catch(e){$(o,e)}}_(o,a)||(n===u&&k(o,a),n===p&&$(o,a))}function _(e,t){var n;try{if(e===t)throw new TypeError(\"A promises callback cannot return that same promise.\");if(t&&(\"function\"==typeof t||\"object\"==typeof t)){var a=t.then;if(\"function\"==typeof a)return a.call(t,function(a){n||(n=!0,t!==a?k(e,a):w(e,a))},function(t){n||(n=!0,$(e,t))}),!0}}catch(t){return n||$(e,t),!0}return!1}function k(e,t){e!==t&&_(e,t)||w(e,t)}function w(e,t){e.state_===c&&(e.state_=l,e.data_=t,b(T,e))}function $(e,t){e.state_===c&&(e.state_=l,e.data_=t,b(x,e))}function L(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)g(t[n])}function T(e){e.state_=u,L(e)}function x(e){e.state_=p,L(e)}function P(e){if(\"function\"!=typeof e)throw new TypeError(\"Promise constructor takes a function argument\");if(this instanceof P==!1)throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");this.then_=[],function(e,t){function n(e){$(t,e)}try{e(function(e){k(t,e)},n)}catch(e){n(e)}}(e,this)}P.prototype={constructor:P,state_:c,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(d),fulfilled:e,rejected:t};return this.state_===u||this.state_===p?b(g,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},P.all=function(e){if(!f(e))throw new TypeError(\"You must pass an array to Promise.all().\");return new this(function(t,n){var a=[],r=0;function o(e){return r++,function(n){a[e]=n,--r||t(a)}}for(var i,s=0;s<e.length;s++)(i=e[s])&&\"function\"==typeof i.then?i.then(o(s),n):a[s]=i;r||t(a)})},P.race=function(e){if(!f(e))throw new TypeError(\"You must pass an array to Promise.race().\");return new this(function(t,n){for(var a,r=0;r<e.length;r++)(a=e[r])&&\"function\"==typeof a.then?a.then(t,n):t(a)})},P.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})},P.reject=function(e){return new this(function(t,n){n(e)})}}(\"undefined\"!=typeof window?window:void 0!==a?a:\"undefined\"!=typeof self?self:this)}).call(t,n(0),n(4).setImmediate)},function(e,t,n){(function(e){var a=void 0!==e&&e||\"undefined\"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(5),t.setImmediate=\"undefined\"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate=\"undefined\"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(0))},function(e,t,n){(function(e,t){!function(e,n){\"use strict\";if(!e.setImmediate){var a,r,o,i,s,c=1,l={},u=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,\"[object process]\"==={}.toString.call(e.process)?a=function(e){t.nextTick(function(){m(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage(\"\",\"*\"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},a=function(e){o.port2.postMessage(e)}):p&&\"onreadystatechange\"in p.createElement(\"script\")?(r=p.documentElement,a=function(e){var t=p.createElement(\"script\");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):a=function(e){setTimeout(m,0,e)}:(i=\"setImmediate$\"+Math.random()+\"$\",s=function(t){t.source===e&&\"string\"==typeof t.data&&0===t.data.indexOf(i)&&m(+t.data.slice(i.length))},e.addEventListener?e.addEventListener(\"message\",s,!1):e.attachEvent(\"onmessage\",s),a=function(t){e.postMessage(i+t,\"*\")}),d.setImmediate=function(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[c]=r,a(c),c++},d.clearImmediate=f}function f(e){delete l[e]}function m(e){if(u)setTimeout(m,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}(t)}finally{f(e),u=!1}}}}}(\"undefined\"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(6))},function(e,t){var n,a,r=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function i(){throw new Error(\"clearTimeout has not been defined\")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{a=\"function\"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var c,l=[],u=!1,p=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):p=-1,l.length&&f())}function f(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(c=l,l=[];++p<t;)c&&c[p].run();p=-1,t=l.length}c=null,u=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||u||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title=\"browser\",r.browser=!0,r.env={},r.argv=[],r.version=\"\",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error(\"process.binding is not supported\")},r.cwd=function(){return\"/\"},r.chdir=function(e){throw new Error(\"process.chdir is not supported\")},r.umask=function(){return 0}},function(e,t){e.exports={status1:\"#f3ff00\",status2:\"orange\",status3:\"#F26C4F\",status4:\"red\",status5:\"#5974a2\",status6:\"#58a1a1\",status7:\"#4CDB4C\",status8:\"#845440\",status9:\"#d6a490\",circlesize:\"12\",circlesize_mobile:\"14\",circleopacity:\".85\"}}]);\n\n\n// WEBPACK FOOTER //\n// app.e43dfecec28323fec77a.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e43dfecec28323fec77a","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 0\n// module chunks = 0","///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// IMPORTS\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\nconst Promise = require('es6-promise-polyfill').Promise;\r\n\r\n///////////////////////////////////////////////////////////////////////////////////\r\n// STYLES, in production, these will be written to <script> tags\r\n///////////////////////////////////////////////////////////////////////////////////\r\n// import './loading.css';\r\nimport styles from './index.scss';\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// GLOBAL VARIABLES & STRUCTURES\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// global config\r\nconst CONFIG = {};\r\nconst DATA = {};\r\n\r\n// basemap definitions, no options here, just a single set of basemap tiles and labels above features. see initMap();\r\nCONFIG.basemaps = {\r\n  'hybrid': L.tileLayer('https://{s}.tiles.mapbox.com/v3/greeninfo.map-zudfckcw/{z}/{x}/{y}.jpg', { pane: 'hybrid' }),\r\n  'satellite': L.gridLayer.googleMutant({ type: 'satellite', pane: 'satellite' }),\r\n  'basemap' : L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}.png', { attribution: '©OpenStreetMap, ©CARTO', pane: 'basemap' }),\r\n  'labels': L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png', { pane: 'labels' }),\r\n};\r\n\r\n// specify which basemap will be on by default, and when the map is reset by the 'Reset' button\r\nCONFIG.default_basemap = 'basemap';\r\n\r\n// default title for results\r\nCONFIG.default_title = 'Worldwide';\r\n\r\n// outerring, used for constructing the mask, see searchCountry();\r\nCONFIG.outerring = [[-90,-360],[-90,360],[90,360],[90,-360],[-90,-360]];\r\n\r\n// minzoom and maxzoom for the map\r\nCONFIG.minzoom = 2;\r\nCONFIG.maxzoom = 17;\r\n\r\n// Style definitions (see also scss exports, which are imported here as styles{})\r\n// a light grey mask covering the entire globe\r\nCONFIG.maskstyle = { stroke: false, fillColor: '#999', fillOpacity: 0.2, className: 'mask' };\r\n// style for highlighting countries on hover and click\r\nCONFIG.country_hover_style    = { stroke: false, fillColor: '#fffef4', fillOpacity: 0.9 };\r\nCONFIG.country_selected_style = { stroke: false, fillColor: '#fff', fillOpacity: 1 };\r\n// an \"invisible\" country style, as we don't want countries to show except on hover or click\r\nCONFIG.country_no_style = { opacity: 0, fillOpacity: 0 };\r\n\r\n// primary attributes to display: used for searching, displaying individual results on map popups, etc.\r\nCONFIG.attributes = {\r\n  'id': {name: 'Tracker ID'},\r\n  'unit': {name: 'Unit'},\r\n  'chinese_name': {name: 'Chinese name'},\r\n  'plant': {name: 'Plant'},\r\n  'url': {name: 'Wiki page'},\r\n  'sponsor': {name: 'Sponsor'},\r\n  'parent': {name: 'Parent'},\r\n  'capacity': {name: 'Capacity (MW)'},\r\n  'status': {name: 'Status'},\r\n  'region': {name: 'Region'},\r\n  'country': {name: 'Country'},\r\n  'subnational': {name: 'Subnational unit (province/state)'},\r\n  'year': {name: 'Start year'},\r\n};\r\n\r\n\r\n// the Universe of status types: these are the categories used to symbolize coal plants on the map\r\n//          key: allowed status names, matching those used in DATA.fossil_data\r\n//          text: human readible display\r\n//          color: imported from CSS\r\nCONFIG.status_types = {\r\n  'announced': {'id': 0, 'text': 'Announced', 'color': styles.status1 },\r\n  'pre-permit': {'id': 1, 'text': 'Pre-permit', 'color': styles.status2 },\r\n  'permitted': {'id': 2, 'text': 'Permitted', 'color': styles.status3 },\r\n  'construction': {'id': 3, 'text': 'Construction', 'color': styles.status4 },\r\n  'shelved': {'id': 4, 'text': 'Shelved', 'color': styles.status5 },\r\n  'retired': {'id': 5, 'text': 'Retired', 'color': styles.status6 },\r\n  'cancelled': {'id': 6, 'text': 'Cancelled', 'color': styles.status7 },\r\n  'operating': {'id': 7, 'text': 'Operating', 'color': styles.status8 },\r\n  'mothballed': {'id': 8, 'text': 'Mothballed', 'color': styles.status9 },\r\n};\r\n\r\n// used to keep a list of markers showing for a particular country or place, by status\r\n// allows us to 'filter' markers, e.g. show/hide using FilterMarkers method added to leaflet.prunecluster.js\r\n// ** IMPORTANT: ensure that these keys match the keys in CONFIG.status_types exactly\r\n// NOTE: Keep in order by status type id (above), otherwise the clusters \"pie charts\" will not get the correct color\r\nCONFIG.status_markers = {\r\n  'announced': {'markers': []},\r\n  'pre-permit': {'markers': []},\r\n  'permitted': {'markers': []},\r\n  'construction': {'markers': []},\r\n  'shelved': {'markers': []},\r\n  'retired': {'markers': []},\r\n  'cancelled': {'markers': []},\r\n  'operating': {'markers': []},\r\n  'mothballed': {'markers': []},\r\n};\r\n\r\n// Note: prunecluster.markercluster.js needs this, and I have not found a better way to provide it\r\nCONFIG.markercluster_colors = Object.keys(CONFIG.status_types).map(function(v) { return CONFIG.status_types[v].color });\r\n\r\n// search fields for various categories. These are selected by values keyed select#search-category\r\n// the strange formatting is required by the search library, this is how search fields are specified\r\nCONFIG.search_categories = {\r\n  'all': {unit: {}, plant: {}, parent: {}, region: {}, country: {}, subnational: {}, year: {}},\r\n  'unit': {unit: {}, plant: {}},\r\n  'parent': {parent: {}},\r\n  'location': {region: {}, country: {}, subnational: {}},\r\n  'year': {year: {}}\r\n}\r\n\r\n// the table columns that the search categories refer to. See searchTableForText()\r\nCONFIG.search_category_columns = {\r\n  'all': [0,4,7,8,9,10],\r\n  'unit': [0],\r\n  'parent': [4],\r\n  'location': [7,8,9],\r\n  'year': [10],\r\n}\r\n\r\n// the placeholder to show, also depends on the select#search-category selection\r\nCONFIG.search_placeholder = {\r\n  'all': 'project name, company, country',\r\n  'unit': 'unit name, plant name',\r\n  'parent': 'company name',\r\n  'location': 'place name',\r\n  'year': 'year (e.g. 2010)',\r\n}\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n///// INITIALIZATION: these functions are called when the page is ready,\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n$(document).ready(function () {\r\n  // data initialization first, then the remaining init steps\r\n  Promise.all([initData('./data/trackers.json'), initData('./data/countries.json'), initData('./data/country_lookup.csv')])\r\n    .then(function(data) {\r\n      initDataFormat(data)    // get data ready for use\r\n      initButtons();          // init button listeners\r\n      initTabs();             // init the main navigation tabs\r\n      initSearch();           // init the full text search\r\n      initMap();              // regular leaflet map setup\r\n      initMapLayers();        // init some map layers and map feature styles\r\n      initStatusCheckboxes(); // initialize the checkboxes to turn on/off trackers by status\r\n      initPruneCluster();     // init the prune clustering library\r\n\r\n      initState();            // init app state given url options\r\n\r\n      // ready!\r\n      setTimeout(function () {\r\n        $(window).trigger('resize');\r\n        $('div#pleasewait').hide();\r\n      }, 300);\r\n    }); // Promise.then()\r\n});\r\n\r\n// listen for changes to the window size and resize the map\r\n$(window).resize(function() {\r\n  // resize the map, table and content divs to fit the current window\r\n  resize();\r\n  updateSearchBar();\r\n})\r\n\r\n// resize everything: map, content divs, table\r\nfunction resize() {\r\n  // calculate the content height for this window:\r\n  // 42px for the nav bar, 10px top #map, 10px top of #container = 42 + 20 + 10\r\n  var winheight = $(window).height();\r\n  var height = winheight - 54;\r\n  if (height > 1000) height = 1000; // on giant screens, we need a max height\r\n\r\n  // resize the map\r\n  $('div#map').height(height - 8);\r\n  CONFIG.map.invalidateSize();\r\n\r\n  // resize the content divs to this same height\r\n  $('div.content').height(height);\r\n\r\n  // resize the table body\r\n  // guesstimate a good scrollbody height; dynamic based on the window height\r\n  var tablediv = $('.dataTables_scrollBody');\r\n  if (!tablediv.length) return;\r\n  // starting value\r\n  var value = $(window).width() < 768 ? 273 : 265;\r\n  // differential sizing depending on if there is a horizontal scrollbar or not\r\n  if (tablediv.hasHorizontalScrollBar()) value += 10;\r\n  var height = $('body').height() - value;\r\n  // set the scrollbody height via css property\r\n  tablediv.css('height', height);\r\n  CONFIG.table.columns.adjust().draw();\r\n}\r\n\r\nfunction updateSearchBar() {\r\n  var category = $('select#search-category').val();\r\n  var placeholder = CONFIG.search_placeholder[category];\r\n  var search = $('input#mapsearch, input#tablesearch');\r\n  var width = $(window).width();\r\n  if (width < 768) {\r\n    if (search.hasClass('collapsed')) return;\r\n    search.addClass('collapsed');\r\n    setTimeout(function() { search.attr('placeholder','') }, 300);\r\n    search.siblings().find('span.glyphicon-search').on('click', function() {\r\n      search.toggleClass('collapsed');\r\n      if (search.hasClass('collapsed')) {\r\n        setTimeout(function() {\r\n          search.attr('placeholder','');\r\n          search.val('');\r\n        }, 300);\r\n      } else {\r\n        search.attr('placeholder',placeholder);\r\n        search.off('click');\r\n      }\r\n    });\r\n  } else {\r\n    search.removeClass('collapsed');\r\n    search.attr('placeholder',placeholder);\r\n  }\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Functions called on doc ready\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Basic data init, returns a promise\r\nfunction initData(url) {\r\n  // wrap this in a promise, so we know we have it before continuing on to remaining initialize steps\r\n  return new Promise(function(resolve, reject) {\r\n    $.get(url, function(data) {\r\n      resolve(data);\r\n    });\r\n  });\r\n}\r\n\r\n// data parsing and formatting, once data are on-board\r\nfunction initDataFormat(data) {\r\n  // set country data equal to the second data object from the initData() Promise()\r\n  DATA.country_data = data[1];\r\n\r\n  // set up a country-lookup, to map country names as provided in the raw spreadsheet data, to country names we have in the country topojson\r\n  var lookup = Papa.parse(data[2], {header: true});\r\n  DATA.country_lookup = {};\r\n  // make a simple lookup from country polygons to our tracker data\r\n  lookup.data.forEach(function(row, i) {\r\n    DATA.country_lookup[row['Name_map']] = row['Name_csv'];\r\n  });\r\n\r\n  // keep a reference to the tracker data JSON\r\n  DATA.tracker_data = data[0];\r\n}\r\n\r\n// init state from allowed params, or not\r\nfunction initState() {\r\n  // first check if we are loading from url params or not\r\n  var params = window.location.href;\r\n  // if we have url params, get the params and use them to set state\r\n  if (params.indexOf('?') > -1) {\r\n    // get the params. The only one supported at the moment is \"country\"\r\n    var params = new URLSearchParams(window.location.search);\r\n    var place = params.get('country');\r\n    if (place) {\r\n      let place_lookup = DATA.country_lookup[place.toTitleCase()];\r\n      // find the country, zoom to it\r\n      CONFIG.countries.eachLayer(function(layer) {\r\n        if (layer.name == place_lookup ) {\r\n          var bounds = layer.getBounds();\r\n          searchCountry(place, bounds, 2000);\r\n          drawTable(DATA.tracker_data);\r\n          highlightCountryLayer(layer.feature);\r\n        }\r\n      })\r\n    } else {\r\n      resetTheMap();\r\n    }\r\n  } else {\r\n    // the default init, if we don't have matching params\r\n    resetTheMap();\r\n  }\r\n}\r\n\r\nfunction initButtons() {\r\n  // \"reset\" button that resets the map\r\n  $('div a#reset-button').on('click', function(){\r\n    resetTheMap();\r\n  });\r\n\r\n  // search icons on the search forms, click to submit\r\n  $('form.search-form span.glyphicon-search').on('click', function() {\r\n    // shouldn't really be needed, since this submits on keyup()\r\n    // and definitely not on mobile, as it interferes with the form exapanding\r\n    if ( !isMobile() ) {\r\n      $(this).closest('form').submit();\r\n    }\r\n  });\r\n\r\n  // close button, generically closes it's direct parent\r\n  $('div.close').on('click', function() { $(this).parent().hide(); });\r\n\r\n  // init the layer icon control to open the legend\r\n  $('#layers-icon').on('click', function() { $('div.layer-control').show(); });\r\n\r\n  // init the menu icon to open the \"results\" panel\r\n  $('div#results-icon').on('click', function() { $('div#country-results').show(); });\r\n\r\n  // the clear search button, clears the search input\r\n  $('div.searchwrapper a.clear-search').on('click', function() {\r\n    $(this).siblings('input').val('').trigger('keyup');\r\n    $(this).hide();\r\n  });\r\n\r\n  // init the zoom button that shows on the modal details for an individual coal plant\r\n  $('#btn-zoom').click(function(){\r\n    var target = this.dataset.zoom.split(',');\r\n    var latlng = L.latLng([target[0], target[1]]);\r\n    var zoom = 16;\r\n\r\n    // remove current basemap\r\n    removeCurrentBasemap();\r\n    // add google satellite basemap\r\n    CONFIG.map.addLayer(CONFIG.basemaps['satellite']);\r\n    // ...and keep the radio button in sync with the map\r\n    $('#layers-base input[data-baselayer=\"satellite\"]').prop('checked', true);\r\n\r\n    // remove any country \"highlight\" and select effect, as this will block the map\r\n    CONFIG.countries.setStyle(CONFIG.country_no_style);\r\n    CONFIG.selected_country.name = '';\r\n    CONFIG.selected_country.layer.clearLayers();\r\n\r\n    // add the back button, which takes the user back to previous view (see function goBack() defined in the construction of Leaflet control)\r\n    // but only if there is not already a back button on the map\r\n    CONFIG.oldbounds = CONFIG.map.getBounds();\r\n    if ($('.btn-back').length == 0) CONFIG.back.addTo(CONFIG.map);\r\n\r\n    // move and zoom the map to the selected unit\r\n    CONFIG.map.setView(latlng, zoom);\r\n  });\r\n\r\n  // a leaflet control to take the user back to where they came\r\n  // Only visible when zooming to an individual plant from the dialog popup. See $('#btn-zoom').click()\r\n  L.backButton = L.Control.extend({\r\n    options: {\r\n      position: 'bottomleft'\r\n    },\r\n\r\n    onAdd: function (map) {\r\n      var container   = L.DomUtil.create('div', 'btn btn-primary btn-back', container);\r\n      container.title = 'Click to go back to the previous view';\r\n      this._map       = map;\r\n\r\n      // generate the button\r\n      var button = L.DomUtil.create('a', 'active', container);\r\n      button.control   = this;\r\n      button.href      = 'javascript:void(0);';\r\n      button.innerHTML = '<span class=\"glyphicon glyphicon-chevron-left\"></span> Go back to country view';\r\n\r\n      L.DomEvent\r\n        .addListener(button, 'click', L.DomEvent.stopPropagation)\r\n        .addListener(button, 'click', L.DomEvent.preventDefault)\r\n        .addListener(button, 'click', function () {\r\n          this.control.goBack();\r\n        });\r\n\r\n      // all set, L.Control API is to return the container we created\r\n      return container;\r\n    },\r\n\r\n    // the function called by the control\r\n    goBack: function () {\r\n      // set the map to the previous bounds\r\n      CONFIG.map.fitBounds(CONFIG.oldbounds);\r\n\r\n      // remove current basemap\r\n      removeCurrentBasemap();\r\n      // add the plain basemap - we could try to keep track of which basemap the user\r\n      // was on before zooming in - but what if they zoom in to another? then the current\r\n      // basemap becomes satellite - and tracking all this gets ridiculous\r\n      CONFIG.map.addLayer(CONFIG.basemaps['basemap']);\r\n\r\n      // keep the radio button in sync with the map\r\n      $('#layers-base input[data-baselayer=\"basemap\"]').prop('checked', true);\r\n\r\n      // remove the back button\r\n      CONFIG.back.remove(CONFIG.map);\r\n    }\r\n  });\r\n}\r\n\r\n// initialize the map in the main navigation map tab\r\nfunction initMap() {\r\n  // basic leaflet map setup\r\n  CONFIG.map = L.map('map', {\r\n    attributionControl:false,\r\n    zoomControl: false,\r\n    minZoom: CONFIG.minzoom, maxZoom: CONFIG.maxzoom,\r\n    attributionControl: false,\r\n  });\r\n\r\n  // add zoom control, top right\r\n  L.control.zoom({\r\n    position:'topright'\r\n  }).addTo(CONFIG.map);\r\n\r\n  // map panes\r\n  // - create panes for basemaps\r\n  CONFIG.map.createPane('basemap');\r\n  CONFIG.map.getPane('basemap').style.zIndex = 300;\r\n  CONFIG.map.getPane('basemap').style.pointerEvents = 'none';\r\n  CONFIG.map.createPane('hybrid');\r\n  CONFIG.map.getPane('hybrid').style.zIndex = 301;\r\n  CONFIG.map.getPane('hybrid').style.pointerEvents = 'none';\r\n  CONFIG.map.createPane('satellite');\r\n  CONFIG.map.getPane('satellite').style.zIndex = 302;\r\n  CONFIG.map.getPane('satellite').style.pointerEvents = 'none';\r\n  CONFIG.map.createPane('labels');\r\n  CONFIG.map.getPane('labels').style.zIndex = 475;\r\n  CONFIG.map.getPane('labels').style.pointerEvents = 'none';\r\n  // - create map panes for county interactions, which will sit between the basemap and labels\r\n  CONFIG.map.createPane('country-mask');\r\n  CONFIG.map.getPane('country-mask').style.zIndex = 320;\r\n  CONFIG.map.createPane('country-hover');\r\n  CONFIG.map.getPane('country-hover').style.zIndex = 350;\r\n  CONFIG.map.createPane('country-select');\r\n  CONFIG.map.getPane('country-select').style.zIndex = 450;\r\n  CONFIG.map.createPane('feature-pane');\r\n  CONFIG.map.getPane('feature-pane').style.zIndex = 550;\r\n\r\n  // add attribution\r\n  var credits = L.control.attribution().addTo(CONFIG.map);\r\n  credits.addAttribution('Interactive mapping by <a href=\"http://greeninfo.org\" target=\"_blank\">GreenInfo Network</a>. Data: <a href=\"https://globalenergymonitor.org/\" target=\"_blank\">Global Energy Monitor</a>');\r\n\r\n  // Add a feature group to hold the mask, essentially a grey box covering the world minus the country in the view\r\n  CONFIG.mask = L.featureGroup([L.polygon(CONFIG.outerring)], {pane: 'country-mask' }).addTo(CONFIG.map);\r\n  CONFIG.mask.setStyle(CONFIG.maskstyle);\r\n\r\n  // Add a layer to hold countries, for click and hover (not mobile) events on country features\r\n  CONFIG.countries = L.featureGroup([], { pane: 'country-hover' }).addTo(CONFIG.map);\r\n  L.geoJson(DATA.country_data,{ style: CONFIG.country_no_style, onEachFeature: massageCountryFeaturesAsTheyLoad });\r\n\r\n  // add a layer to hold any selected country\r\n  CONFIG.selected_country = {};\r\n  CONFIG.selected_country.layer = L.geoJson([], {style: CONFIG.country_selected_style, pane: 'country-select'}).addTo(CONFIG.map);\r\n\r\n  // add a feature group to hold the clusters\r\n  CONFIG.cluster_layer = L.featureGroup([], {pane: 'feature-pane' }).addTo(CONFIG.map);\r\n\r\n  // mobile: hide legend\r\n  var layercontrol = $('.layer-control');\r\n  if (isMobile()) layercontrol.hide();\r\n\r\n  // once the map is done loading, resize\r\n  CONFIG.map.on('load', function() {\r\n    resize();\r\n    CONFIG.map.invalidateSize();\r\n  });\r\n\r\n  // create an instance of L.backButton()\r\n  CONFIG.back = new L.backButton() // not added now, see initButtons()\r\n\r\n  // zoom listeners\r\n  CONFIG.map.on('zoomend', function() {\r\n    let zoom = CONFIG.map.getZoom();\r\n  });\r\n\r\n}\r\n\r\nfunction initMapLayers() {\r\n  // on startup, add the basemap and labels\r\n  CONFIG.map.addLayer(CONFIG.basemaps.basemap);\r\n  CONFIG.map.addLayer(CONFIG.basemaps.labels);\r\n\r\n  // set listener on radio button change to change to the selected basemap\r\n  // and also control whether or not the mask is showing\r\n  $('#layers-base input').change(function() {\r\n    var selected = $(this).data().baselayer;\r\n    // remove current basemap and labels\r\n    removeCurrentBasemap();\r\n    // add selected basemap and labels, if necessary\r\n    CONFIG.map.addLayer(CONFIG.basemaps[selected]);\r\n    if (selected == 'basemap') CONFIG.map.addLayer(CONFIG.basemaps.labels);\r\n  });\r\n}\r\n\r\n// set listener on checkboxes to turn on/off trackers by status, and update the clusters\r\nfunction initStatusCheckboxes() {\r\n  $('div.layer-control').on('change', '#status-layers input', function() {\r\n    var status = $(this).val();\r\n    var markers = CONFIG.status_markers[status].markers;\r\n    CONFIG.clusters.FilterMarkers(markers, !$(this).prop('checked')); // false to filter on, true to filter off :)\r\n    CONFIG.clusters.ProcessView();\r\n  });\r\n}\r\n\r\n// initialize the nav tabs: what gets shown, what gets hidden, what needs resizing, when these are displayed\r\n// important: to add a functional tab, you must also include markup for it in css, see e.g. input#help-tab:checked ~ div#help-content {}\r\nfunction initTabs()    {\r\n  $('input.tab').on('click', function(e) {\r\n    // get the type from the id\r\n    var type = e.currentTarget.id.split(\"-\")[0];\r\n    switch (type) {\r\n      case 'map':\r\n        CONFIG.map.invalidateSize(false);\r\n        $('form.search-form').show();\r\n        break;\r\n      case 'table':\r\n        // resize the table, if it exists\r\n        $('form.search-form').show();\r\n        if (CONFIG.table) {\r\n          resize();\r\n        }\r\n        break;\r\n      default:\r\n        // hide search form\r\n        $('form.search-form').hide();\r\n        break;\r\n    }\r\n  });\r\n}\r\n\r\n// Init search for matching keywords entered in the input at top-right\r\n// we use ElasticLunr (https://github.com/weixsong/elasticlunr.js) as the search \"engine\"\r\nfunction initSearch() {\r\n  // config search engine with the fields and data to be searched\r\n  // which end up searched depends on selections made in select#search-categories and implemented at run time\r\n  CONFIG.searchengine = elasticlunr(function () {\r\n    this.addField('sponsor');\r\n    this.addField('parent');\r\n    this.addField('unit');\r\n    this.addField('plant');\r\n    this.addField('country');\r\n    this.addField('region');\r\n    this.addField('subnational');\r\n    this.addField('year');\r\n    this.setRef('id');\r\n  });\r\n  DATA.tracker_data.forEach(function(document) {\r\n    CONFIG.searchengine.addDoc(document);\r\n  })\r\n\r\n  // update the placeholder text when search category is selected\r\n  $('select#search-category').on('change', function() {\r\n    let value = $(this).val();\r\n    let placeholder = CONFIG.search_placeholder[value];\r\n    // clear any search string on the search and update the placeholder\r\n    $('input#mapsearch, input#tablesearch').attr('placeholder', placeholder);\r\n  });\r\n\r\n  // init the \"map search\" form input itself\r\n  $('form#search input').keyup(_.debounce(function() {\r\n    // if the input is cleared, redo the 'everything' search (e.g. show all results)\r\n    // this is distinct from the case of \"No results\", in searchMapForText\r\n    if (!this.value) return render();\r\n    // otherwise, just trigger the search\r\n    $(this).submit();\r\n  },300));\r\n\r\n  $('form#search').submit(function(e) {\r\n    // prevent default, and return early if we submitted an empty form\r\n    e.preventDefault();\r\n    if (! $('form#search input').val()) return;\r\n\r\n    // only two search types at the moment: table or map\r\n    let search_type = $('input.tab:checked').data('tab');\r\n    if (search_type == 'map') {\r\n      searchMapForText();\r\n    } else {\r\n      searchTableForText();\r\n    }\r\n  })\r\n\r\n}\r\n\r\n// initialize the PruneClusters, and override some factory methods\r\nfunction initPruneCluster() {\r\n  // create a new PruceCluster object, with a minimal cluster size of (30)\r\n  // updated arg to 30; seems to really help countries like China/India\r\n  CONFIG.clusters = new PruneClusterForLeaflet(30);\r\n  CONFIG.map.addLayer(CONFIG.clusters);\r\n\r\n  // this is from the categories example; sets ups cluster stats used to derive category colors in the clusters\r\n  CONFIG.clusters.BuildLeafletClusterIcon = function(cluster) {\r\n    var e = new L.Icon.MarkerCluster();\r\n    e.stats = cluster.stats;\r\n    e.population = cluster.population;\r\n    return e;\r\n  };\r\n\r\n  var pi2 = Math.PI * 2;\r\n\r\n  L.Icon.MarkerCluster = L.Icon.extend({\r\n    options: {\r\n      iconSize: new L.Point(22, 22),\r\n      className: 'prunecluster leaflet-markercluster-icon'\r\n    },\r\n\r\n    createIcon: function () {\r\n      // based on L.Icon.Canvas from shramov/leaflet-plugins (BSD licence)\r\n      var e = document.createElement('canvas');\r\n      this._setIconStyles(e, 'icon');\r\n      var s = this.options.iconSize;\r\n      e.width = s.x;\r\n      e.height = s.y;\r\n      this.draw(e.getContext('2d'), s.x, s.y);\r\n      return e;\r\n    },\r\n\r\n    createShadow: function () {\r\n      return null;\r\n    },\r\n\r\n    draw: function(canvas, width, height) {\r\n      // the pie chart itself\r\n      var start = 0;\r\n      for (var i = 0, l = CONFIG.markercluster_colors.length; i < l; ++i) {\r\n        // the size of this slice of the pie\r\n        var size = this.stats[i] / this.population;\r\n        if (size > 0) {\r\n          canvas.beginPath();\r\n          canvas.moveTo(11, 11);\r\n          canvas.fillStyle = CONFIG.markercluster_colors[i];\r\n          // start from a smidgen away, to create a tiny gap, unless this is a single slice pie\r\n          // in which case we don't want a gap\r\n          var gap = size == 1 ? 0 : 0.15\r\n          var from = start + gap;\r\n          var to = start + size * pi2;\r\n\r\n          if (to < from) {\r\n            from = start;\r\n          }\r\n          canvas.arc(11,11,11, from, to);\r\n          start = start + size*pi2;\r\n          canvas.lineTo(11,11);\r\n          canvas.fill();\r\n          canvas.closePath();\r\n        }\r\n      }\r\n\r\n      // the white circle on top of the pie chart, to make the middle of the \"donut\"\r\n      canvas.beginPath();\r\n      canvas.fillStyle = 'white';\r\n      canvas.arc(11, 11, 7, 0, Math.PI*2);\r\n      canvas.fill();\r\n      canvas.closePath();\r\n\r\n      // the text label count\r\n      canvas.fillStyle = '#555';\r\n      canvas.textAlign = 'center';\r\n      canvas.textBaseline = 'middle';\r\n      canvas.font = 'bold 9px sans-serif';\r\n\r\n      canvas.fillText(this.population, 11, 11, 15);\r\n    }\r\n  });\r\n\r\n  // we override this method: don't force zoom to a cluster on click (the default)\r\n  CONFIG.clusters.BuildLeafletCluster = function (cluster, position) {\r\n    var _this = this;\r\n    var m = new L.Marker(position, {\r\n      icon: this.BuildLeafletClusterIcon(cluster)\r\n    });\r\n    // this defines what happen when you click a cluster, not the underlying icons\r\n    m.on('click', function () {\r\n      var markersArea = _this.Cluster.FindMarkersInArea(cluster.bounds);\r\n      var b = _this.Cluster.ComputeBounds(markersArea);\r\n      if (b) {\r\n        // skip the force zoom that is here by default, instead, spiderfy the overlapping icons\r\n        _this._map.fire('overlappingmarkers', { cluster: _this, markers: markersArea, center: m.getLatLng(), marker: m });\r\n      }\r\n    });\r\n    return m;\r\n  }\r\n\r\n  // we override this method to handle clicks on individual plant markers (not the clusters)\r\n  CONFIG.clusters.PrepareLeafletMarker = function(leafletMarker, data){\r\n    var html = `<div style='text-align:center;'><strong>${data.title}</strong><br><div class='popup-click-msg'>Click the circle for details</div></div>`;\r\n    leafletMarker.bindPopup(html);\r\n    leafletMarker.setIcon(data.icon);\r\n    leafletMarker.attributes = data.attributes;\r\n    leafletMarker.coordinates = data.coordinates;\r\n    leafletMarker.on('click',function () {\r\n      openTrackerInfoPanel(this);\r\n    });\r\n    leafletMarker.on('mouseover', function() {\r\n      this.openPopup();\r\n    });\r\n    leafletMarker.on('mouseout', function() { CONFIG.map.closePopup(); });\r\n  }\r\n\r\n  // A convenience method for marking a given feature as \"filtered\" (e.g. not shown on the map and removed from a cluster)\r\n  CONFIG.clusters.FilterMarkers = function (markers, filter) {\r\n    for (var i = 0, l = markers.length; i < l; ++i) {\r\n      // false to add, true to remove\r\n      markers[i].filtered = filter;\r\n    }\r\n  };\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// General functions\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n// Set up all map layers for all types and statuses, and set up layer objects in CONFIG.status_types['layers'], so we can turn them on and off later.\r\nfunction drawMap(data, force_redraw=false, fitbounds=true) {\r\n  // step 1: clear the marker clustering system and repopulate it with the current set of tracker points\r\n  // as we go through, log what statuses are in fact seen; this is used in step 5 to show/hide checkboxes for toggling trackers by status\r\n  var statuses   = [];\r\n  var trackers   = [];\r\n  data.forEach(function (tracker) {\r\n    var status = tracker.status;\r\n    if (status) {\r\n      // log that this status has been seen, see step 3 below\r\n      if (statuses.indexOf(status) < 0) statuses.push(status);\r\n      // add the feature to the trackers list for the table\r\n      trackers.push(tracker);\r\n    }\r\n  });\r\n  // step 2: update the marker clustering, now that \"trackers\" is implicitly filtered to everything that we need\r\n  updateClusters(trackers, fitbounds);\r\n\r\n  // step 3: hide the status toggle checkboxes, showing only the ones which in fact have a status represented\r\n  drawLegend(statuses);\r\n}\r\n\r\nfunction updateClusters(data, fitbounds) {\r\n  // start by clearing out existing clusters\r\n  CONFIG.clusters.RemoveMarkers();\r\n\r\n  // iterate over the data and set up the clusters\r\n  data.forEach(function(feature) {\r\n    // the \"status\" of the tracker point affects its icon color\r\n    // and also its membership in CONFIG.status_markers for per-status filtering\r\n    var status = feature.status;\r\n    var statusId = CONFIG.status_types[status]['id'];\r\n    var cssClass = `status${statusId + 1}`;\r\n    var marker = new PruneCluster.Marker(parseFloat(feature.lat), parseFloat(feature.lng), {\r\n      title: feature.unit,\r\n      icon: L.divIcon({\r\n          className: 'circle-div ' + cssClass, // Specify a class name we can refer to in CSS.\r\n          iconSize: [15, 15] // Set the marker width and height\r\n        })\r\n    });\r\n\r\n    // get the attributes for use in the custom popup dialog (see openTrackerInfoPanel())\r\n    marker.data.attributes = feature;\r\n\r\n    // get the lat-lng now so we can zoom to the plant's location later\r\n    // getting the lat-lng of the spider won't work, since it gets spidered out to some other place\r\n    // tip: the raw dataset is lng,lat and Leaflet is lat,lng\r\n    marker.data.coordinates = [ feature.lat, feature.lng ];\r\n\r\n    // set the category for PruneCluster-ing\r\n    marker.category = parseInt(statusId);\r\n\r\n    // These have all defaulted to visible for a long time now... do we need this??\r\n    // furthermore, if the marker shouldn't be visible at first, filter the marker by setting the filtered flag to true (=don't draw me)\r\n    // if (!CONFIG.status_types[status].visible) marker.filtered = true;\r\n\r\n    // register the marker for PruneCluster clustering\r\n    CONFIG.clusters.RegisterMarker(marker);\r\n\r\n    // also add the marker to the list by status, so we can toggle it on/off in the legend\r\n    // see CONFIG.map.on('overlayadd') and CONFIG.map.on('overlayremove')\r\n    CONFIG.status_markers[status].markers.push(marker);\r\n  });\r\n  // all set! process the view, and fit the map to the new bounds\r\n  CONFIG.clusters.ProcessView();\r\n  var cluster_bounds = CONFIG.clusters.Cluster.ComputeGlobalBounds();\r\n  if (cluster_bounds) {\r\n    var bounds = [[cluster_bounds.minLat, cluster_bounds.minLng],[cluster_bounds.maxLat, cluster_bounds.maxLng]];\r\n  } else {\r\n    // we have no clusters (empty result)!\r\n    bounds = CONFIG.homebounds;\r\n  }\r\n  // fit the map to the bounds, if instructed\r\n  if (fitbounds) {\r\n    // timeout appears necessary to let the clusters do their thing, before fitting bounds\r\n    setTimeout(function() {\r\n      // typically we'll just do this (e.g. on search)\r\n      CONFIG.map.fitBounds(bounds);\r\n\r\n      // first load: a trick to always fit the bounds in the map, see #20\r\n      if (! CONFIG.homebounds) {\r\n        let center = CONFIG.map.getCenter();\r\n        let zoom = CONFIG.map.getBoundsZoom(bounds, true); // finds the zoom where bounds are fully contained\r\n        CONFIG.map.setView([center.lat, center.lng], zoom);\r\n        CONFIG.map.once(\"moveend zoomend\", function() {\r\n          // wait til this animation is complete, then set homebounds, if it hasn't been set yet (or do nothing if it has)\r\n          CONFIG.homebounds = CONFIG.homebounds || CONFIG.map.getBounds();\r\n        });\r\n      }\r\n    }, 200)\r\n  }\r\n}\r\n// show and hide the correct legend labels and checkboxes for this set of data and statuses\r\n// \"statuses\" comes from the data search itself\r\nfunction drawLegend(statuses) {\r\n  $('#status-layer-wrapper').show();\r\n  var target = $('#status-layers').html(''); // clear existing html\r\n  statuses.forEach(function(status) {\r\n    var label = $('<label>');\r\n    var input = $('<input>', {\r\n      type: 'checkbox',\r\n      value: status\r\n    }).attr('checked','checked');\r\n    input.appendTo(label);\r\n\r\n    var container = $('<span>', {'class': 'legend-container'}).appendTo(label);\r\n    // adds colored circle to legend\r\n    var div = $('<div>', {\r\n      style: 'background:' + CONFIG.status_types[status].color,\r\n      'class': 'circle'\r\n    }).appendTo(container);\r\n    // adds text to legend\r\n    var innerSpan = $('<span>', {\r\n      text: ' ' + CONFIG.status_types[status].text\r\n    }).appendTo(container);\r\n\r\n    label.appendTo(target);\r\n  });\r\n}\r\n\r\nfunction drawTable(trackers, title) {\r\n  // set up the table column names we want to use in the table\r\n  var columns = $.map(CONFIG.attributes, function(value){ return value; });\r\n\r\n  // set up formatted column names for the table\r\n  var names = Object.keys(CONFIG.attributes);\r\n  // don't include column for url; we're going to format this as a link together with the unit name\r\n  var index = $.inArray('url',names);\r\n  columns.splice(index, 1);\r\n  names.splice(index, 1);\r\n  // put table column names into format we need for DataTables\r\n  var colnames = [];\r\n  $.each(columns, function(k, value) {\r\n    // set up an empty object and push a sTitle keys to it for each column title\r\n    var obj = {};\r\n    obj['title'] = value.name;\r\n    colnames.push(obj);\r\n  });\r\n  // set up the table data\r\n  var data = [];\r\n  trackers.forEach(function(tracker) {\r\n    // make up a row entry for the table: a list of column values.\r\n    // and copy over all columns from [names] as is to this row\r\n    var row = [];\r\n    $.each(names, function(i,name) {\r\n      // we've already got 'Unit' formatted as a link, above, so skip this here\r\n      if (name=='unit') return;\r\n      row.push(tracker[name]);\r\n    });\r\n    // Add project name as url to the wiki page\r\n    row.splice(1,0,`<a href=\"${tracker.url}\" target=\"_blank\" title=\"click to open the Wiki page for this project\">${tracker.unit}</a>`);\r\n    // when that's all done, push the row as another [] to data\r\n    data.push(row);\r\n  });\r\n  // get the table target from the dom\r\n  var tableElement = $('#table-content table');\r\n  // purge and reinitialize the DataTable instance\r\n  // first time initialization\r\n  if (!CONFIG.table) {\r\n    CONFIG.table = tableElement.DataTable({\r\n      data           : data,\r\n      // include the id in the data, but not searchable, nor displayed\r\n      columnDefs     : [{targets:[0], visible: false, searchable: false}],\r\n      columns        : colnames,\r\n      autoWidth      : true,\r\n      scrollY        : \"1px\", // initial value only, will be resized by calling resize();\r\n      scrollX        : true,\r\n      lengthMenu     : [50, 100, 500],\r\n      iDisplayLength : 500, // 100 has a noticable lag to it when displaying and filtering; 10 is fastest\r\n      dom            : 'litp',\r\n      deferRender    : true, // default is false\r\n    });\r\n\r\n  // every subsequent redraw with new data: we don't need to reinitialize, just clear and update rows\r\n  } else {\r\n    CONFIG.table.clear();\r\n    CONFIG.table.rows.add(data);\r\n    CONFIG.table.search('').draw();\r\n  }\r\n\r\n  // update the table name, if provided\r\n  var text = title ? title : CONFIG.default_title;\r\n  $('div#table h3 span').text(text);\r\n}\r\n\r\n// update the \"results\" panel that sits above the map\r\n// this always shows either the Global tally of things, or a country-specific count, or a count from a search term enterd in the \"Free Search\" input\r\nfunction updateResultsPanel(data, country=CONFIG.default_title) {\r\n  // update primary content\r\n  $('div#country-results div#results-title h3').text(country);\r\n  var totalrow = $('div#country-results div#total-count').empty();\r\n  var totaltext = data.length > 0 ? (data.length > 1 ? `Tracking ${data.length.toLocaleString()} coal-fired units` : `Tracking ${data.length} coal project`) : `Nothing found`;\r\n  var total = $('<div>',{text: totaltext}).appendTo(totalrow);\r\n}\r\n\r\n// when user clicks on a coal plant point, customize a popup dialog and open it\r\nfunction openTrackerInfoPanel(feature) {\r\n  // get the features properties, i.e. the data to show on the modal\r\n  var properties = feature.attributes;\r\n  // get the popup object itself and customize\r\n  var popup = $('#tracker-modal');\r\n  // go through each property for this one feature, and write out the value to the correct span, according to data-name property\r\n  $.each(properties, function(dataname, value) {\r\n    // get preferred text for each status types\r\n    if (dataname == 'status') value = CONFIG.status_types[value].text;\r\n    // write the status name to the dialog\r\n    $('#tracker-modal .modal-content span').filter('[data-name=\"' + dataname + '\"]').text(value);\r\n  })\r\n\r\n  // wiki page needs special handling to format as <a> link\r\n  var url = properties['url'];\r\n  var wiki = $('#tracker-modal .modal-content span').filter('[data-name=\"wiki_page\"]').text('');\r\n  $('<a>', { text: url, href: url, target: \"_blank\"} ).appendTo(wiki);\r\n\r\n  // format the zoom-to button data.zoom attribute. See initZoom();\r\n  // this lets one zoom to the location of the clicked plant\r\n  var zoomButton = $('#btn-zoom');\r\n  zoomButton.attr('data-zoom', feature.attributes.lat + \",\" + feature.attributes.lng);\r\n\r\n  // all set: open the dialog\r\n  popup.modal();\r\n}\r\n\r\n// Reset \"button\": resets the app to default state\r\nfunction resetTheMap() {\r\n  // clear anything in the search inputs\r\n  $('form.search-form input').val('');\r\n\r\n  // reset map & table display with the default search\r\n  // If we have a homebounds defined, that means we've been here before, and have rendered the full data to the map.\r\n  if (CONFIG.homebounds) {\r\n    // use homebounds we already defined\r\n    render({ force_redraw: true, fitbounds: false });\r\n    CONFIG.map.fitBounds(CONFIG.homebounds);\r\n  } else {\r\n    // first time through, let this function do the map fitting and set CONFIG.homebounds\r\n    render({ force_redraw: true });\r\n  }\r\n\r\n  // clear any existing country and feature selection\r\n  CONFIG.selected_country.layer.clearLayers();\r\n  CONFIG.selected_country.name = '';\r\n\r\n  // switch back to the map tab\r\n  $('input#map-tab').click();\r\n\r\n  // resize everything\r\n  resize();\r\n}\r\n\r\n// this callback is used when CONFIG.countries is loaded via GeoJSON; see initMap() for details\r\nfunction massageCountryFeaturesAsTheyLoad(rawdata,feature) {\r\n  // attach some attributes\r\n  feature.name = rawdata.properties['NAME'];\r\n\r\n  // only register hover events for non-touch, non-mobile devices\r\n  // including isMobile() || isIpad() here to include iPad and exclude \"other\" touch devices here, e.g. my laptop, which is touch, but not mobile\r\n  if (! (isTouch() && ( isMobile() || isIpad() ))) {\r\n    // on mouseover, highlight me; on mouseout quit highlighting\r\n    feature.on('mouseover', function (e) {\r\n      // if we are at a high zoom, don't do anything\r\n      if (CONFIG.map.getZoom() > 7) return;\r\n      // if this country is already 'selected', don't do anything\r\n      var name = this.feature.properties['NAME'];\r\n      if (CONFIG.selected_country.name == name) return;\r\n      // keep a reference to the hovered featured feature\r\n      // and unhighlight other countries that may already be highlighted\r\n      if (name != CONFIG.hovered) CONFIG.countries.setStyle(CONFIG.country_no_style);\r\n      CONFIG.hovered = name;\r\n      // then highlight this country\r\n      this.setStyle(CONFIG.country_hover_style);\r\n    }).on('mouseout', function (e) {\r\n      // on mouseout, remove the highlight, unless\r\n      // this country is already \"selected\" (clicked, see below)\r\n      var name = this.feature.properties['NAME'];\r\n      if (CONFIG.selected_country.name == name) return;\r\n      this.setStyle(CONFIG.country_no_style);\r\n    });\r\n  }\r\n  // at lower zooms, register a click event: on click, search and zoom to the selected country\r\n  feature.on('click', clickCountry);\r\n\r\n  // finally add this individual country feature to CONFIG.countries\r\n  // CONFIG.countries.addLayer(feature);\r\n  feature.addTo(CONFIG.countries);\r\n}\r\n\r\n// define what happens when we click a country\r\nfunction clickCountry(e) {\r\n  // exit early if we are at high zoom\r\n  if (CONFIG.map.getZoom() > 7) return;\r\n  // clear the map search input\r\n  $('form#search input').val('');\r\n  // get the name of the clicked country, and keep a reference to it\r\n  var name = e.target.feature.properties['NAME'];\r\n  CONFIG.selected_country.name = name;\r\n  highlightCountryLayer(e.target.feature);\r\n  // call the search function\r\n  searchCountry(name, e.target._bounds);\r\n}\r\n\r\nfunction highlightCountryLayer(feature) {\r\n  // highlight it on the map, first clearning any existing selection\r\n  CONFIG.selected_country.layer.clearLayers();\r\n  CONFIG.selected_country.layer.addData(feature);\r\n}\r\n\r\n// remove the current basemap from the view\r\nfunction removeCurrentBasemap() {\r\n  Object.keys(CONFIG.basemaps).forEach(function(basemap) {\r\n    CONFIG.map.removeLayer(CONFIG.basemaps[basemap]);\r\n    CONFIG.map.removeLayer(CONFIG.basemaps.labels);\r\n  });\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n///// SEARCH FUNCTIONS\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n// searches all data for keyword(s)\r\nfunction searchMapForText() {\r\n  // get the keywords to search\r\n  var keywords = $('form#search input').val();\r\n\r\n  // Kick off a search to find data matching the keyword, and pull out the results\r\n  // initial config:\r\n  // - combine search terms with 'AND' ('OR' is the default)\r\n  // - expand tokens, to better match substrings (default is false, to emphasize whole words)\r\n  let options = {bool: 'AND', expand: true};\r\n  // extract the fields to search, from the selected 'search category' options\r\n  let category = $('select#search-category').val();\r\n  options['fields'] = {'unit':{},'plant':{},'sponsor':{}};\r\n  options.fields = CONFIG.search_categories[category];\r\n  var search_results = CONFIG.searchengine.search(keywords, options);\r\n  var results = [];\r\n  search_results.forEach(function(result) {\r\n    results.push(result.doc)\r\n  });\r\n\r\n  // add to the results to map, table, legend\r\n  drawMap(results);                                 // update the map (and legend)\r\n  updateResultsPanel(results, keywords)             // update the results-panel\r\n  drawTable(results, keywords);                     // populate the table\r\n  $('form#nav-table-search input').val(keywords);   // sync the table search input with the keywords\r\n  CONFIG.selected_country.layer.clearLayers();      // clear any selected country\r\n  CONFIG.selected_country.name = '';                // ... and reset the name\r\n  $('div#country-results').show();                  // show the results panel, in case hidden\r\n  $('a.clear-search').show();                       // show the clear search links\r\n\r\n  return false;\r\n}\r\n\r\nfunction searchTableForText() {\r\n  // get the keywords to search\r\n  var keywords = $('form#search input').val();\r\n  // update the table name, if provided\r\n  if (keywords) $('div#table h3 span').text(keywords);\r\n\r\n  // use DataTables built in search function to search the table with the typed value, and refresh\r\n  // first map the selected search category to DT columns\r\n  var category = $('select#search-category').val();\r\n  var cols = CONFIG.search_category_columns[category];\r\n  CONFIG.table.columns(cols).search(keywords).draw();\r\n\r\n  // Meanwhile, search the map for this same string.\r\n  // Debounce this with a long delay, because it doesn't have to be instant (the map isn't visible after all)\r\n  _.debounce(function() {\r\n    // recalc the map data from the resulting table data\r\n    var data = CONFIG.table.rows({ filter : 'applied'} ).data();\r\n    // pull out the ids to an array\r\n    var ids = data.map(function(row) {return row[0]});\r\n\r\n    // update the map from matching ids\r\n    var data = [];\r\n    DATA.tracker_data.forEach(function(d) {\r\n      if (ids.indexOf(d.id) > -1) data.push(d);\r\n    });\r\n    drawMap(data);                                  // update the map\r\n    $('form#search input').val(keywords);           // sync the map search input with the keywords\r\n    CONFIG.selected_country.layer.clearLayers();    // clear any selected country\r\n    updateResultsPanel(data, keywords);             // update the results panel\r\n    $('a.clear-search').show();                     // show the clear search links\r\n\r\n  },500,false)();\r\n}\r\n\r\n// The primary controller for rendering things\r\nfunction render(options) {\r\n  if (options === undefined) options = {};\r\n  // If defined, take as given, otherwise, assign the default value as stated\r\n  options.name          = options.name         !== undefined ? options.name : CONFIG.default_title;\r\n  options.map           = options.map          !== undefined ? options.map : true;\r\n  options.results       = options.results      !== undefined ? options.results : true;\r\n  options.table         = options.table        !== undefined ? options.table : true;\r\n  options.force_redraw  = options.force_redraw !== undefined ? options.force_redraw : false;\r\n  options.fitbounds     = options.fitbounds    !== undefined ? options.fitbounds : true;\r\n\r\n  // optionally draw the map (and legend) table, results\r\n  $('div.searchwrapper a.clear-search').hide();\r\n  if (options.map)     drawMap(DATA.tracker_data, options.force_redraw, options.fitbounds);\r\n  if (options.results) updateResultsPanel(DATA.tracker_data);\r\n  if (options.table)   drawTable(DATA.tracker_data, options.name);\r\n}\r\n\r\n// zoom to the bounds of the country, and continue to show items outside of its boundaries\r\nfunction searchCountry(name, bounds, delay=1) {\r\n  // get the data for this country, *only* for updating the results panel\r\n  // the map and table, continue to show all data\r\n  var data = [];\r\n  // translate from the country data names to our tracker data names, then look for matches\r\n  var name = DATA.country_lookup[name];\r\n  DATA.tracker_data.forEach(function(feature) {\r\n    // look for matching names in feature.properties.countries\r\n    if (name == feature.country) data.push(feature);\r\n  });\r\n\r\n  // because we are not filtering the map, but only changing the bounds\r\n  // results on the map can easily get out of sync due to a previous search filter\r\n  // so first we need to explicity render() the map with all data, but not the table or results\r\n  render({ name: name, map: true, results: false, table: false, fitbounds: false });\r\n  // THEN update results panel for *this* country data only\r\n  updateResultsPanel(data, name);\r\n  // THEN the table, with all data, but not with this name\r\n  // may seem superfluous, but important to keep the map/table in sync, and showing all data\r\n  drawTable(DATA.tracker_data);\r\n\r\n  // Last step: zoom the map to the selected country\r\n  // some countries require special/custom bounds calcs, because they straddle the dateline or are otherwise non-standard\r\n  switch (name) {\r\n    case 'Russia':\r\n      bounds = L.latLngBounds([38.35400, 24], [78.11962,178]);\r\n      break;\r\n    case 'United States':\r\n      bounds = L.latLngBounds([18.3, -172.6], [71.7,-67.4]);\r\n      break;\r\n    case 'Canada':\r\n      bounds = L.latLngBounds([41.6, -141.0], [81.7,-52.6]);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  setTimeout(function() {\r\n    CONFIG.map.fitBounds(bounds);\r\n  }, delay)\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n///// SHIMS AND UTILITIES: Various polyfills to add functionality\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// trim() function\r\nif(!String.prototype.trim) { String.prototype.trim = function () {return this.replace(/^\\s+|\\s+$/g,'');};}\r\n\r\n// string Capitalize\r\nString.prototype.capitalize = function() { return this.charAt(0).toUpperCase() + this.slice(1);}\r\n\r\n// check if a div has a horizontal scrollbar\r\n$.fn.hasHorizontalScrollBar = function() {return this.get(0).scrollWidth > this.get(0).clientWidth; }\r\n\r\n// get an object's keys\r\nObject.keys||(Object.keys=function(){\"use strict\";var t=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable(\"toString\"),e=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],o=e.length;return function(n){if(\"object\"!=typeof n&&(\"function\"!=typeof n||null===n))throw new TypeError(\"Object.keys called on non-object\");var c,l,p=[];for(c in n)t.call(n,c)&&p.push(c);if(r)for(l=0;o>l;l++)t.call(n,e[l])&&p.push(e[l]);return p}}());\r\n\r\n// get a string's Troper Case\r\nString.prototype.toTitleCase=function(){var e,r,t,o,n;for(t=this.replace(/([^\\W_]+[^\\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),o=[\"A\",\"An\",\"The\",\"And\",\"But\",\"Or\",\"For\",\"Nor\",\"As\",\"At\",\"By\",\"For\",\"From\",\"In\",\"Into\",\"Near\",\"Of\",\"On\",\"Onto\",\"To\",\"With\"],e=0,r=o.length;r>e;e++)t=t.replace(new RegExp(\"\\\\s\"+o[e]+\"\\\\s\",\"g\"),function(e){return e.toLowerCase()});for(n=[\"Id\",\"Tv\"],e=0,r=n.length;r>e;e++)t=t.replace(new RegExp(\"\\\\b\"+n[e]+\"\\\\b\",\"g\"),n[e].toUpperCase());return t};\r\n\r\n// function to indicate whether we are likely being viewed on a touch device\r\nfunction isTouch() { return !!(\"ontouchstart\" in window) || window.navigator.msMaxTouchPoints > 0; }\r\n\r\n// function to detect if we are likely being view on iPad\r\nfunction isIpad() { return (navigator.userAgent.match(/iPad/i)) && (navigator.userAgent.match(/iPad/i)!= null); }\r\n\r\n// variable to show if we are are on a device with a small window\r\nfunction isMobile() { return $(window).width() < 768 }\r\n\r\n// reduce arrays to unique items\r\nconst uniq = (a) => { return Array.from(new Set(a));}\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","(function(global){\n\n//\n// Check for native Promise and it has correct interface\n//\n\nvar NativePromise = global['Promise'];\nvar nativePromiseSupported =\n  NativePromise &&\n  // Some of these methods are missing from\n  // Firefox/Chrome experimental implementations\n  'resolve' in NativePromise &&\n  'reject' in NativePromise &&\n  'all' in NativePromise &&\n  'race' in NativePromise &&\n  // Older version of the spec had a resolver object\n  // as the arg rather than a function\n  (function(){\n    var resolve;\n    new NativePromise(function(r){ resolve = r; });\n    return typeof resolve === 'function';\n  })();\n\n\n//\n// export if necessary\n//\n\nif (typeof exports !== 'undefined' && exports)\n{\n  // node.js\n  exports.Promise = nativePromiseSupported ? NativePromise : Promise;\n  exports.Polyfill = Promise;\n}\nelse\n{\n  // AMD\n  if (typeof define == 'function' && define.amd)\n  {\n    define(function(){\n      return nativePromiseSupported ? NativePromise : Promise;\n    });\n  }\n  else\n  {\n    // in browser add to global\n    if (!nativePromiseSupported)\n      global['Promise'] = Promise;\n  }\n}\n\n\n//\n// Polyfill\n//\n\nvar PENDING = 'pending';\nvar SEALED = 'sealed';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar NOOP = function(){};\n\nfunction isArray(value) {\n  return Object.prototype.toString.call(value) === '[object Array]';\n}\n\n// async calls\nvar asyncSetTimer = typeof setImmediate !== 'undefined' ? setImmediate : setTimeout;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush(){\n  // run promise callbacks\n  for (var i = 0; i < asyncQueue.length; i++)\n    asyncQueue[i][0](asyncQueue[i][1]);\n\n  // reset async asyncQueue\n  asyncQueue = [];\n  asyncTimer = false;\n}\n\nfunction asyncCall(callback, arg){\n  asyncQueue.push([callback, arg]);\n\n  if (!asyncTimer)\n  {\n    asyncTimer = true;\n    asyncSetTimer(asyncFlush, 0);\n  }\n}\n\n\nfunction invokeResolver(resolver, promise) {\n  function resolvePromise(value) {\n    resolve(promise, value);\n  }\n\n  function rejectPromise(reason) {\n    reject(promise, reason);\n  }\n\n  try {\n    resolver(resolvePromise, rejectPromise);\n  } catch(e) {\n    rejectPromise(e);\n  }\n}\n\nfunction invokeCallback(subscriber){\n  var owner = subscriber.owner;\n  var settled = owner.state_;\n  var value = owner.data_;  \n  var callback = subscriber[settled];\n  var promise = subscriber.then;\n\n  if (typeof callback === 'function')\n  {\n    settled = FULFILLED;\n    try {\n      value = callback(value);\n    } catch(e) {\n      reject(promise, e);\n    }\n  }\n\n  if (!handleThenable(promise, value))\n  {\n    if (settled === FULFILLED)\n      resolve(promise, value);\n\n    if (settled === REJECTED)\n      reject(promise, value);\n  }\n}\n\nfunction handleThenable(promise, value) {\n  var resolved;\n\n  try {\n    if (promise === value)\n      throw new TypeError('A promises callback cannot return that same promise.');\n\n    if (value && (typeof value === 'function' || typeof value === 'object'))\n    {\n      var then = value.then;  // then should be retrived only once\n\n      if (typeof then === 'function')\n      {\n        then.call(value, function(val){\n          if (!resolved)\n          {\n            resolved = true;\n\n            if (value !== val)\n              resolve(promise, val);\n            else\n              fulfill(promise, val);\n          }\n        }, function(reason){\n          if (!resolved)\n          {\n            resolved = true;\n\n            reject(promise, reason);\n          }\n        });\n\n        return true;\n      }\n    }\n  } catch (e) {\n    if (!resolved)\n      reject(promise, e);\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction resolve(promise, value){\n  if (promise === value || !handleThenable(promise, value))\n    fulfill(promise, value);\n}\n\nfunction fulfill(promise, value){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = value;\n\n    asyncCall(publishFulfillment, promise);\n  }\n}\n\nfunction reject(promise, reason){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = reason;\n\n    asyncCall(publishRejection, promise);\n  }\n}\n\nfunction publish(promise) {\n  var callbacks = promise.then_;\n  promise.then_ = undefined;\n\n  for (var i = 0; i < callbacks.length; i++) {\n    invokeCallback(callbacks[i]);\n  }\n}\n\nfunction publishFulfillment(promise){\n  promise.state_ = FULFILLED;\n  publish(promise);\n}\n\nfunction publishRejection(promise){\n  promise.state_ = REJECTED;\n  publish(promise);\n}\n\n/**\n* @class\n*/\nfunction Promise(resolver){\n  if (typeof resolver !== 'function')\n    throw new TypeError('Promise constructor takes a function argument');\n\n  if (this instanceof Promise === false)\n    throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\n  this.then_ = [];\n\n  invokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n  constructor: Promise,\n\n  state_: PENDING,\n  then_: null,\n  data_: undefined,\n\n  then: function(onFulfillment, onRejection){\n    var subscriber = {\n      owner: this,\n      then: new this.constructor(NOOP),\n      fulfilled: onFulfillment,\n      rejected: onRejection\n    };\n\n    if (this.state_ === FULFILLED || this.state_ === REJECTED)\n    {\n      // already resolved, call callback async\n      asyncCall(invokeCallback, subscriber);\n    }\n    else\n    {\n      // subscribe\n      this.then_.push(subscriber);\n    }\n\n    return subscriber.then;\n  },\n\n  'catch': function(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nPromise.all = function(promises){\n  var Class = this;\n\n  if (!isArray(promises))\n    throw new TypeError('You must pass an array to Promise.all().');\n\n  return new Class(function(resolve, reject){\n    var results = [];\n    var remaining = 0;\n\n    function resolver(index){\n      remaining++;\n      return function(value){\n        results[index] = value;\n        if (!--remaining)\n          resolve(results);\n      };\n    }\n\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolver(i), reject);\n      else\n        results[i] = promise;\n    }\n\n    if (!remaining)\n      resolve(results);\n  });\n};\n\nPromise.race = function(promises){\n  var Class = this;\n\n  if (!isArray(promises))\n    throw new TypeError('You must pass an array to Promise.race().');\n\n  return new Class(function(resolve, reject) {\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolve, reject);\n      else\n        resolve(promise);\n    }\n  });\n};\n\nPromise.resolve = function(value){\n  var Class = this;\n\n  if (value && typeof value === 'object' && value.constructor === Class)\n    return value;\n\n  return new Class(function(resolve){\n    resolve(value);\n  });\n};\n\nPromise.reject = function(reason){\n  var Class = this;\n\n  return new Class(function(resolve, reject){\n    reject(reason);\n  });\n};\n\n})(typeof window != 'undefined' ? window : typeof global != 'undefined' ? global : typeof self != 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/es6-promise-polyfill/promise.js\n// module id = 3\n// module chunks = 0","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/timers-browserify/main.js\n// module id = 4\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/setimmediate/setImmediate.js\n// module id = 5\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 6\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"status1\":\"#f3ff00\",\"status2\":\"orange\",\"status3\":\"#F26C4F\",\"status4\":\"red\",\"status5\":\"#5974a2\",\"status6\":\"#58a1a1\",\"status7\":\"#4CDB4C\",\"status8\":\"#845440\",\"status9\":\"#d6a490\",\"circlesize\":\"12\",\"circlesize_mobile\":\"14\",\"circleopacity\":\".85\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.scss\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}